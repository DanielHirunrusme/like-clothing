{"version":3,"sources":["../../node_modules/browser-pack/_prelude.js","../../node_modules/audio5/audio5.js","../../node_modules/intervalometer/dist/intervalometer.common-js.js","../../node_modules/iphone-inline-video/dist/iphone-inline-video.common-js.js","../../node_modules/jquery-mousewheel/jquery.mousewheel.js","../../node_modules/poor-mans-symbol/dist/poor-mans-symbol.common-js.js","../../src/js/lib/init-modules.js","../../src/js/main.js","../../src/js/modules/audio.js","../../src/js/modules/body.js","../../src/js/modules/control-scroll.js","../../src/js/modules/controlscroll.js","../../src/js/modules/desktop-scroll.js","../../src/js/modules/form.js","../../src/js/modules/mobile-scroll.js","../../src/js/modules/scroll-loop.js","../../src/js/modules/settings.js","../../src/js/modules/throttle.js","../../src/js/modules/videos.js"],"names":["$win","ns","factory","module","exports","define","amd","window","AudioError","message","this","cloneObject","obj","i","clone","ActiveXObject","prototype","Error","extend","target","mixin","name","m","hasOwnProperty","include","Pubsub","on","evt","fn","ctx","subscribe","one","off","undefined","channels","l","length","sub","splice","once","push","trigger","args","Array","slice","call","arguments","a","shift","apply","util","flash_embed_code","id","swf_location","ts","prefix","s","can_play","mime_type","mime_str","document","createElement","navigator","userAgent","match","canPlayType","has_flash","r","plugins","mimeTypes","mimeType","enabledPlugin","ax","e","embedFlash","d","style","position","width","height","top","body","appendChild","fv","playerInstance","params","allowscriptaccess","wmode","innerHTML","swfobject","embedSWF","Date","getTime","Math","random","getElementById","formatTime","seconds","result","hours","parseInt","minutes","secs","fragment","use_flash","Audio5js","FlashAudioPlayer","HTML5AudioPlayer","AudioAttributes","playing","vol","duration","load_percent","seekable","ready","globalAudio5Flash","instances","count","init","swf_src","embed","eiReady","audio","eiLoadStart","eiLoadedMetadata","eiCanPlay","eiTimeUpdate","eiProgress","percent","eiLoadError","msg","eiPlay","eiPause","eiEnded","pause","eiSeeking","eiSeeked","reset","load","url","play","pplay","ppause","volume","v","isNaN","setVolume","seek","seekTo","destroyAudio","parentNode","removeChild","createAudio","Audio","autoplay","preload","autobuffer","bindEvents","unbindEvents","setAttribute","setupEventListeners","listeners","loadstart","onLoadStart","bind","canplay","onLoad","loadedmetadata","onLoadedMetadata","onPlay","onPause","ended","onEnded","error","onError","timeupdate","onTimeUpdate","seeking","onSeeking","seeked","onSeeked","addEventListener","removeEventListener","timer","setInterval","onProgress","setTimeout","currentTime","Infinity","buffered","end","clearLoadProgress","clearInterval","min","settings","swf_path","throw_errors","format_time","codecs","k","getPlayer","bindAudioEvents","player","codec","engine","onReady","onCanPlay","unbindAudioEvents","that","f","u","playPause","destroy","loaded","intervalometer","cb","request","cancel","requestParameter","loop","now","requestId","previousLoopTime","start","stop","frameIntervalometer","requestAnimationFrame","cancelAnimationFrame","timerIntervalometer","delay","clearTimeout","Object","defineProperty","value","_interopDefault","ex","preventEvent","element","eventName","toggleProperty","preventWithProperty","handler","Boolean","stopImmediatePropagation","proxyProperty","object","propertyName","sourceObject","copyFirst","get","set","proxyEvent","dispatchEvent","Event","dispatchEventAsync","type","Promise","resolve","then","getAudioFromVideo","video","crossOrigin","src","currentSrc","setTime","time","rememberOnly","lastTimeupdateEvent","ಠevent","lastRequests","requestIndex","isPlayerEnded","driver","update","timeDiff","readyState","HAVE_FUTURE_DATA","hasAudio","playbackRate","networkState","NETWORK_IDLE","ಠ","Document","fullscreenElement","ಠplay","paused","updater","HAVE_ENOUGH_DATA","forceEvents","ಠpause","addPlayer","muted","wasEmpty","indexOf","overloadAPI","enableInlineVideo","onlyWhitelisted","isWhitelisted","classList","add","test","platform","console","warn","Symbol","require","matchMedia","matches","jQuery","$","event","orgEvent","delta","deltaX","deltaY","absDelta","offsetX","offsetY","fix","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaMode","lineHeight","data","pageHeight","max","abs","lowestDelta","shouldAdjustOldDeltas","special","normalizeOffset","getBoundingClientRect","boundingRect","clientX","left","clientY","deltaFactor","unshift","nullLowestDeltaTimeout","nullLowestDelta","dispatch","handle","adjustOldDeltas","toFix","toBind","documentMode","fixHooks","mouseHooks","mousewheel","version","setup","onmousewheel","getLineHeight","getPageHeight","teardown","removeData","elem","$elem","$parent","css","unmousewheel","unbind","index","description","initializeModules","modules","querySelectorAll","Module","el","names","getAttribute","split","j","log","unique","throttle","initAudio","intro","introAfter","credits","toggleAudio","$el","toggleClass","audioOn","fadeOut","fadeIn","fadeInterval","introVol","introAfterVol","creditsVol","getVolPercent","_volume","winResize","$window","addClass","removeClass","instance","show","makeVideoPlayableInline","controlScroll","watchcontrolScroll","animLoop","render","running","lastFrame","scrollInt","autoScrollTimer","xListener","find","xPos","autoScroll","$scrollContainer","st","setScrollContainer","scrollContainer","scroll","y","fadeOverlay","checkScrollPos","scrollTo","isMobile","scroller","scrollTop","scrollMobile","hasClass","op","toFixed","scrollHeight","animate","stopAutoScroll","timerSpeed","deltaT","controlscroll","startAutoScroll","setVideos","stopPropagation","watchVideos","-webkit-transform","-ms-transform","transform","inputFocus","vidScrollWidth","each","$videoScroll","$videoWidth","getName","videos","form","desktopScroll","onScroll","winMouseDown","winMove","_x","pageX","_y","pageY","outerWidth","outerHeight","focus","testOver","cursor","val","updatePosition","attachScroller","myScroll","IScroll","probeType","scrollbars","fadeScrollbars","bounce","mouseWheel","scrollbarClass","deceleration","preventDefault","touchStart","originalEvent","touches","scrollLoop","checkMobile","breakpoints","xs","ml","xl","xxl","siteURL","animationSpeed","animationType","animating","page","scrollPos","threshold","scope","last","deferTimer","context","attr","floor"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*!\n * Audio5js: HTML5 Audio Compatibility Layer\n * https://github.com/zohararad/audio5js\n * License MIT (c) Zohar Arad 2013\n */\n(function ($win, ns, factory) {\n  \"use strict\";\n  /*global define */\n  /*global swfobject */\n\n  if (typeof (module) !== 'undefined' && module.exports) { // CommonJS\n    module.exports = factory(ns, $win);\n  } else if (typeof (define) === 'function' && define.amd) { // AMD\n    define(function () {\n      return factory(ns, $win);\n    });\n  } else { // <script>\n    $win[ns] = factory(ns, $win);\n  }\n\n}(window, 'Audio5js', function (ns, $win) {\n\n  \"use strict\";\n\n  var ActiveXObject = $win.ActiveXObject;\n\n  /**\n   * AudioError Class\n   * @param {String} message error message\n   * @constructor\n   */\n  function AudioError(message) {\n    this.message = message;\n  }\n\n  AudioError.prototype = new Error();\n\n  /**\n   * Clones an object\n   * @param obj object to clone\n   * @return {Object} cloned object\n   */\n  function cloneObject(obj) {\n    var clone = {}, i;\n    for (i in obj) {\n      if (typeof (obj[i]) === \"object\") {\n        clone[i] = cloneObject(obj[i]);\n      } else {\n        clone[i] = obj[i];\n      }\n    }\n    return clone;\n  }\n\n  /**\n   * Extend an object with a mixin\n   * @param {Object} target target object to extend\n   * @param {Object} mixin object to mix into target\n   * @return {*} extended object\n   */\n  var extend = function (target, mixin) {\n    var name, m = cloneObject(mixin);\n    for (name in m) {\n      if (m.hasOwnProperty(name)) {\n        target[name] = m[name];\n      }\n    }\n    return target;\n  };\n\n  /**\n   * Extend an object's prototype with a mixin\n   * @param {Object} target target object to extend\n   * @param {Object} mixin object to mix into target\n   * @return {*} extended object\n   */\n  var include = function (target, mixin) {\n    return extend(target.prototype, mixin);\n  };\n\n  var Pubsub = {\n    /**\n     * Subscribe to event on a channel\n     * @param {String} evt name of channel / event to subscribe\n     * @param {Function} fn the callback to execute on message publishing\n     * @param {Object} ctx the context in which the callback should be executed\n     */\n    on: function (evt, fn, ctx) {\n      this.subscribe(evt, fn, ctx, false);\n    },\n    /**\n     * Subscribe to a one-time event on a channel\n     * @param {String} evt name of channel / event to subscribe\n     * @param {Function} fn the callback to execute on message publishing\n     * @param {Object} ctx the context in which the callback should be executed\n     */\n    one: function(evt, fn, ctx) {\n      this.subscribe(evt, fn, ctx, true);\n    },\n    /**\n     * Unsubscribe from an event on a channel\n     * @param {String} evt name of channel / event to unsubscribe\n     * @param {Function} fn the callback used when subscribing to the event\n     */\n    off: function (evt, fn) {\n      if (this.channels[evt] === undefined) { return; }\n      var i, l;\n      for (i = 0, l = this.channels[evt].length; i  < l; i++) {\n        var sub = this.channels[evt][i].fn;\n        if (sub === fn) {\n          this.channels[evt].splice(i, 1);\n          break;\n        }\n      }\n    },\n    /**\n     * Add event subscription to channel. Called by `on` and `one`\n     * @param {String} evt name of channel / event to subscribe\n     * @param {Function} fn the callback to execute on message publishing\n     * @param {Object} ctx the context in which the callback should be executed\n     * @param {Boolean} once indicate if event should be triggered once or not\n     */\n    subscribe: function (evt, fn, ctx, once) {\n      if (this.channels === undefined) {\n        this.channels = {};\n      }\n      this.channels[evt] = this.channels[evt] || [];\n      this.channels[evt].push({fn: fn, ctx: ctx, once: (once || false)});\n    },\n    /**\n     * Publish a message on a channel. Accepts **args** after event name\n     * @param {String} evt name of channel / event to trigger\n     */\n    trigger: function (evt) {\n      if (this.channels && this.channels.hasOwnProperty(evt)) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        var a = [];\n        while(this.channels[evt].length > 0) {\n          var sub = this.channels[evt].shift();\n          if (typeof (sub.fn) === 'function') {\n            sub.fn.apply(sub.ctx, args);\n          }\n          if ( !sub.once ){\n            a.push(sub);\n          }\n        }\n        this.channels[evt] = a;\n      }\n    }\n  };\n\n  var util = {\n    /**\n     * Flash embed code string with cross-browser support.\n     */\n  flash_embed_code: function (id, swf_location, ts) {\n      var prefix;\n      var s = '<param name=\"movie\" value=\"' + swf_location + '?playerInstance=window.' + ns + '_flash.instances[\\'' + id + '\\']&datetime=' + ts + '\"/>' +\n        '<param name=\"wmode\" value=\"transparent\"/>' +\n        '<param name=\"allowscriptaccess\" value=\"always\" />' +\n        '</object>';\n      if (ActiveXObject) {\n        prefix = '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\"1\" height=\"1\" id=\"' + id + '\">';\n      } else {\n        prefix = '<object type=\"application/x-shockwave-flash\" data=\"' + swf_location + '?playerInstance=window.' + ns + '_flash.instances[\\'' + id + '\\']&datetime=' + ts + '\" width=\"1\" height=\"1\" id=\"' + id + '\" >';\n      }\n      return prefix + s;\n    },\n    /**\n     * Check if browser supports audio mime type.\n     * @param {String} mime_type audio mime type to check\n     * @return {Boolean} whether browser supports passed audio mime type\n     */\n    can_play: function (mime_type) {\n      var a = document.createElement('audio');\n      var mime_str;\n      switch (mime_type) {\n        case 'mp3':\n          mime_str = 'audio/mpeg;';\n          break;\n        case 'vorbis':\n          mime_str = 'audio/ogg; codecs=\"vorbis\"';\n          break;\n        case 'opus':\n          mime_str = 'audio/ogg; codecs=\"opus\"';\n          break;\n        case 'webm':\n          mime_str = 'audio/webm; codecs=\"vorbis\"';\n          break;\n        case 'mp4':\n          mime_str = 'audio/mp4; codecs=\"mp4a.40.5\"';\n          break;\n        case 'wav':\n          mime_str = 'audio/wav; codecs=\"1\"';\n          break;\n      }\n      if (mime_str !== undefined) {\n        if (mime_type === 'mp3' && navigator.userAgent.match(/Android/i) && navigator.userAgent.match(/Firefox/i)) {\n          return true;\n        }\n        return !!a.canPlayType && a.canPlayType(mime_str) !== '';\n      }\n      return false;\n    },\n    /**\n     * Boolean flag indicating whether the browser has Flash installed or not\n     */\n    has_flash: (function () {\n      var r = false;\n      if (navigator.plugins && navigator.plugins.length && navigator.plugins['Shockwave Flash']) {\n        r = true;\n      } else if (navigator.mimeTypes && navigator.mimeTypes.length) {\n        var mimeType = navigator.mimeTypes['application/x-shockwave-flash'];\n        r = mimeType && mimeType.enabledPlugin;\n      } else {\n        try {\n          var ax = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n          r = typeof (ax) === 'object';\n        } catch (e) {}\n      }\n      return r;\n    }()),\n    /**\n     * Embed Flash MP3 player SWF to DOM\n     * @param {String} swf_location location of MP3 player SWF\n     * @param {String} id swf unique ID used for resolving callbacks from ExternalInterface to Javascript\n     */\n    embedFlash: function (swf_location, id) {\n      var d = document.createElement('div');\n      d.style.position = 'absolute';\n      d.style.width = '1px';\n      d.style.height = '1px';\n      d.style.top = '1px';\n      document.body.appendChild(d);\n      if(typeof($win.swfobject) === 'object'){\n        var fv = {\n          playerInstance: 'window.'+ ns + '_flash.instances[\\''+id+'\\']'\n        };\n        var params = {\n          allowscriptaccess: 'always',\n          wmode: 'transparent'\n        };\n        d.innerHTML = '<div id=\"'+id+'\"></div>';\n        swfobject.embedSWF(swf_location + '?ts='+(new Date().getTime() + Math.random()), id, \"1\", \"1\", \"9.0.0\", null, fv, params);\n      } else {\n        var ts = new Date().getTime() + Math.random(); // Ensure swf is not pulled from cache\n        d.innerHTML = this.flash_embed_code(id, swf_location, ts);\n      }\n      return document.getElementById(id);\n    },\n    /**\n     * Formats seconds into a time string hh:mm:ss.\n     * @param {Number} seconds seconds to format as string\n     * @return {String} formatted time string\n     */\n    formatTime: function (seconds) {\n      var hours = parseInt(seconds / 3600, 10) % 24;\n      var minutes = parseInt(seconds / 60, 10) % 60;\n      var secs = parseInt(seconds % 60, 10);\n      var result, fragment = (minutes < 10 ? \"0\" + minutes : minutes) + \":\" + (secs  < 10 ? \"0\" + secs : secs);\n      if (hours > 0) {\n        result = (hours < 10 ? \"0\" + hours : hours) + \":\" + fragment;\n      } else {\n        result = fragment;\n      }\n      return result;\n    }\n  };\n\n  util.use_flash = util.can_play('mp3');\n\n  var Audio5js, FlashAudioPlayer, HTML5AudioPlayer;\n\n  /**\n   * Common audio attributes object. Mixed into audio players.\n   * @type {Object}\n   */\n  var AudioAttributes = {\n    playing: false, /** {Boolean} player playback state  */\n    vol: 1, /** {Float} audio volume */\n    duration: 0, /** {Float} audio duration (sec) */\n    position: 0, /** {Float} audio position (sec) */\n    load_percent: 0, /** {Float} audio file load percent (%) */\n    seekable: false, /** {Boolean} is loaded audio seekable */\n    ready: null /** {Boolean} is loaded audio seekable */\n  };\n\n  /**\n   * Global object holding flash-based player instances.\n   * Used to create a bridge between Flash's ExternalInterface calls and FlashAudioPlayer instances\n   * @type {Object}\n   */\n  var globalAudio5Flash = $win[ns + '_flash'] = $win[ns + '_flash'] || {\n    instances: { }, /** FlashAudioPlayer instance hash */\n    count: 0 /** FlashAudioPlayer instance count */\n  };\n\n  /**\n   * Flash MP3 Audio Player Class\n   * @constructor\n   */\n  FlashAudioPlayer = function () {\n    if (util.use_flash && !util.has_flash) {\n      throw new Error('Flash Plugin Missing');\n    }\n  };\n\n  FlashAudioPlayer.prototype = {\n    /**\n     * Initialize the player\n     * @param {String} swf_src path to audio player SWF file\n     */\n    init: function (swf_src) {\n      globalAudio5Flash.count += 1;\n      this.id = ns + globalAudio5Flash.count;\n      globalAudio5Flash.instances[this.id] = this;\n      this.embed(swf_src);\n    },\n    /**\n     * Embed audio player SWF in page and assign reference to audio instance variable\n     * @param {String} swf_src path to audio player SWF file\n     */\n    embed: function (swf_src) {\n      util.embedFlash(swf_src, this.id);\n    },\n    /**\n     * ExternalInterface callback indicating SWF is ready\n     */\n    eiReady: function () {\n      this.audio = document.getElementById(this.id);\n      this.trigger('ready');\n    },\n    /**\n     * ExternalInterface audio load started callback. Fires when audio starts loading.\n     */\n    eiLoadStart: function(){\n      this.trigger('loadstart');\n    },\n    /**\n     * ExternalInterface audio metadata loaded callback. Fires when audio ID3 tags have been loaded.\n     */\n    eiLoadedMetadata: function(){\n      this.trigger('loadedmetadata');\n    },\n    /**\n     * ExternalInterface audio can play callback. Fires when audio can be played.\n     */\n    eiCanPlay: function () {\n      this.trigger('canplay');\n    },\n    /**\n     * ExternalInterface timeupdate callback. Fires as long as playhead position is updated (audio is being played).\n     * @param {Float} position audio playback position (sec)\n     * @param {Float} duration audio total duration (sec)\n     * @param {Boolean} seekable is audio seekable or not (download or streaming)\n     */\n    eiTimeUpdate: function (position, duration, seekable) {\n      this.position = position;\n      this.duration = duration;\n      this.seekable = seekable;\n      this.trigger('timeupdate', position, (this.seekable ? duration : null));\n    },\n    /**\n     * ExternalInterface download progress callback. Fires as long as audio file is downloaded by browser.\n     * @param {Float} percent audio download percent\n     * @param {Float} duration audio total duration (sec)\n     * * @param {Boolean} seekable is audio seekable or not (download or streaming)\n     */\n    eiProgress: function (percent, duration, seekable) {\n      this.load_percent = percent;\n      this.duration = duration;\n      this.seekable = seekable;\n      this.trigger('progress', percent);\n    },\n    /**\n     * ExternalInterface audio load error callback.\n     * @param {String} msg error message\n     */\n    eiLoadError: function (msg) {\n      this.trigger('error', msg);\n    },\n    /**\n     * ExternalInterface audio play callback. Fires when audio starts playing.\n     */\n    eiPlay: function () {\n      this.playing = true;\n      this.trigger('play');\n    },\n    /**\n     * ExternalInterface audio pause callback. Fires when audio is paused.\n     */\n    eiPause: function () {\n      this.playing = false;\n      this.trigger('pause');\n    },\n    /**\n     * ExternalInterface audio ended callback. Fires when audio playback ended.\n     */\n    eiEnded: function () {\n      this.pause();\n      this.trigger('ended');\n    },\n    /**\n     * ExternalInterface audio seeking callback. Fires when audio is being seeked.\n     */\n    eiSeeking: function(){\n      this.trigger('seeking');\n    },\n    /**\n     * ExternalInterface audio seeked callback. Fires when audio has been seeked.\n     */\n    eiSeeked: function(){\n      this.trigger('seeked');\n    },\n    /**\n     * Resets audio position and parameters. Invoked once audio is loaded.\n     */\n    reset: function () {\n      this.seekable = false;\n      this.duration = 0;\n      this.position = 0;\n      this.load_percent = 0;\n    },\n    /**\n     * Load audio from url.\n     * @param {String} url URL of audio to load\n     */\n    load: function (url) {\n      this.reset();\n      this.audio.load(url);\n    },\n    /**\n     * Play audio\n     */\n    play: function () {\n      this.audio.pplay();\n    },\n    /**\n     * Pause audio\n     */\n    pause: function () {\n      this.audio.ppause();\n    },\n    /**\n     * Get / Set audio volume\n     * @param {Float} v audio volume to set between 0 - 1.\n     * @return {Float} current audio volume\n     */\n    volume: function (v) {\n      if (v !== undefined && !isNaN(parseInt(v, 10))) {\n        this.audio.setVolume(v);\n        this.vol = v;\n      } else {\n        return this.vol;\n      }\n    },\n    /**\n     * Seek audio to position\n     * @param {Float} position audio position in seconds to seek to.\n     */\n    seek: function (position) {\n      try {\n        this.audio.seekTo(position);\n        this.position = position;\n      } catch (e) {}\n    },\n    /**\n     * Destroy audio object and remove from DOM\n     */\n    destroyAudio: function() {\n      if(this.audio){\n        this.pause();\n        this.audio.parentNode.removeChild(this.audio);\n        delete globalAudio5Flash.instances[this.id];\n        delete this.audio;\n      }\n    }\n  };\n\n  include(FlashAudioPlayer, Pubsub);\n  include(FlashAudioPlayer, AudioAttributes);\n\n  /**\n   * HTML5 Audio Player\n   * @constructor\n   */\n  HTML5AudioPlayer = function () {};\n\n  HTML5AudioPlayer.prototype = {\n    /**\n     * Initialize the player instance\n     */\n    init: function () {\n      this.trigger('ready');\n    },\n    /**\n     * Create new audio instance\n     */\n    createAudio: function(){\n      this.audio = new Audio();\n      this.audio.autoplay = false;\n      this.audio.preload = 'auto';\n      this.audio.autobuffer = true;\n      this.bindEvents();\n    },\n    /**\n     * Destroy current audio instance\n     */\n    destroyAudio: function(){\n      if(this.audio){\n        this.pause();\n        this.unbindEvents();\n        try {\n          this.audio.setAttribute('src', '');\n        } finally {\n          delete this.audio;\n        }\n      }\n    },\n    /**\n     * Sets up audio event listeners once so adding / removing event listeners is always done\n     * on the same callbacks.\n     */\n    setupEventListeners: function(){\n      this.listeners = {\n        loadstart: this.onLoadStart.bind(this),\n        canplay: this.onLoad.bind(this),\n        loadedmetadata: this.onLoadedMetadata.bind(this),\n        play: this.onPlay.bind(this),\n        pause: this.onPause.bind(this),\n        ended: this.onEnded.bind(this),\n        error: this.onError.bind(this),\n        timeupdate: this.onTimeUpdate.bind(this),\n        seeking: this.onSeeking.bind(this),\n        seeked: this.onSeeked.bind(this)\n      };\n    },\n    /**\n     * Bind DOM events to Audio object\n     */\n    bindEvents: function() {\n      if(this.listeners === undefined){\n        this.setupEventListeners();\n      }\n      this.audio.addEventListener('loadstart', this.listeners.loadstart, false);\n      this.audio.addEventListener('canplay', this.listeners.canplay, false);\n      this.audio.addEventListener('loadedmetadata', this.listeners.loadedmetadata, false);\n      this.audio.addEventListener('play', this.listeners.play, false);\n      this.audio.addEventListener('pause', this.listeners.pause, false);\n      this.audio.addEventListener('ended', this.listeners.ended, false);\n      this.audio.addEventListener('error', this.listeners.error, false);\n      this.audio.addEventListener('timeupdate', this.listeners.timeupdate, false);\n      this.audio.addEventListener('seeking', this.listeners.seeking, false);\n      this.audio.addEventListener('seeked', this.listeners.seeked, false);\n    },\n    /**\n     * Unbind DOM events from Audio object\n     */\n    unbindEvents: function() {\n      this.audio.removeEventListener('loadstart', this.listeners.loadstart);\n      this.audio.removeEventListener('canplay', this.listeners.canplay);\n      this.audio.removeEventListener('loadedmetadata', this.listeners.loadedmetadata);\n      this.audio.removeEventListener('play', this.listeners.play);\n      this.audio.removeEventListener('pause', this.listeners.pause);\n      this.audio.removeEventListener('ended', this.listeners.ended);\n      this.audio.removeEventListener('error', this.listeners.error);\n      this.audio.removeEventListener('timeupdate', this.listeners.timeupdate);\n      this.audio.removeEventListener('seeking', this.listeners.seeking);\n      this.audio.removeEventListener('seeked', this.listeners.seeked);\n    },\n    /**\n     * Audio load start event handler. Triggered when audio starts loading\n     */\n    onLoadStart: function(){\n      this.trigger('loadstart');\n    },\n    /**\n     * Audio canplay event handler. Triggered when audio is loaded and can be played.\n     * Resets player parameters and starts audio download progress timer.\n     */\n    onLoad: function () {\n      if(!this.audio){\n        return setTimeout(this.onLoad.bind(this), 100);\n      }\n      this.seekable = this.audio.seekable && this.audio.seekable.length > 0;\n      if (this.seekable) {\n        this.timer = setInterval(this.onProgress.bind(this), 250);\n      }\n      this.trigger('canplay');\n    },\n    /**\n     * Audio ID3 load event handler. Triggered when ID3 metadata is loaded.\n     */\n    onLoadedMetadata: function(){\n      this.trigger('loadedmetadata');\n    },\n    /**\n     * Audio play event handler. Triggered when audio starts playing.\n     */\n    onPlay: function () {\n      this.playing = true;\n      this.trigger('play');\n    },\n    /**\n     * Audio pause event handler. Triggered when audio is paused.\n     */\n    onPause: function () {\n      this.playing = false;\n      this.trigger('pause');\n    },\n    /**\n     * Audio ended event handler. Triggered when audio playback has ended.\n     */\n    onEnded: function () {\n      this.playing = false;\n      this.trigger('ended');\n    },\n    /**\n     * Audio timeupdate event handler. Triggered as long as playhead position is updated (audio is being played).\n     */\n    onTimeUpdate: function () {\n      if (this.audio && this.playing) {\n        try{\n          this.position = this.audio.currentTime;\n          this.duration = this.audio.duration === Infinity ? null : this.audio.duration;\n        } catch (e){}\n        this.trigger('timeupdate', this.position, this.duration);\n      }\n    },\n    /**\n     * Audio download progress timer callback. Check audio's download percentage.\n     * Called periodically as soon as the audio loads and can be played.\n     * Cancelled when audio has fully download or when a new audio file has been loaded to the player.\n     */\n    onProgress: function () {\n      if (this.audio && this.audio.buffered !== null && this.audio.buffered.length) {\n        this.duration = this.audio.duration === Infinity ? null : this.audio.duration;\n        this.load_percent = parseInt(((this.audio.buffered.end(this.audio.buffered.length - 1) / this.duration) * 100), 10);\n        this.trigger('progress', this.load_percent);\n        if (this.load_percent >= 100) {\n          this.clearLoadProgress();\n        }\n      }\n    },\n    /**\n     * Audio error event handler\n     * @param e error event\n     */\n    onError: function (e) {\n      this.trigger('error', e);\n    },\n    /**\n     * Audio seeking event handler. Triggered when audio seek starts.\n     */\n    onSeeking: function(){\n      this.trigger('seeking');\n    },\n    /**\n     * Audio seeked event handler. Triggered when audio has been seeked.\n     */\n    onSeeked: function(){\n      this.trigger('seeked');\n    },\n    /**\n     * Clears periodical audio download progress callback.\n     */\n    clearLoadProgress: function () {\n      if (this.timer !== undefined) {\n        clearInterval(this.timer);\n        delete this.timer;\n      }\n    },\n    /**\n     * Resets audio position and parameters.\n     */\n    reset: function () {\n      this.clearLoadProgress();\n      this.seekable = false;\n      this.duration = 0;\n      this.position = 0;\n      this.load_percent = 0;\n    },\n    /**\n     * Load audio from url.\n     * @param {String} url URL of audio to load\n     */\n    load: function (url) {\n      this.reset();\n      //this.destroyAudio();\n      if(this.audio === undefined){\n        this.createAudio();\n      }\n      this.audio.setAttribute('src', url);\n      this.audio.load();\n    },\n    /**\n     * Play audio\n     */\n    play: function () {\n      this.audio.play();\n    },\n    /**\n     * Pause audio\n     */\n    pause: function () {\n      this.audio.pause();\n    },\n    /**\n     * Get / Set audio volume\n     * @param {Float} v audio volume to set between 0 - 1.\n     * @return {Float} current audio volume\n     */\n    volume: function (v) {\n      if (v !== undefined && !isNaN(parseInt(v, 10))) {\n        var vol = v < 0 ? 0 : Math.min(1, v);\n        this.audio.volume = vol;\n        this.vol = vol;\n      } else {\n        return this.vol;\n      }\n    },\n    /**\n     * Seek audio to position\n     * @param {Float} position audio position in seconds to seek to.\n     */\n    seek: function (position) {\n      var playing = this.playing;\n      this.position = position;\n      this.audio.currentTime = position;\n      if (playing) {\n        this.play();\n      } else {\n        if (this.audio.buffered !== null && this.audio.buffered.length) {\n          this.trigger('timeupdate', this.position, this.duration);\n        }\n      }\n    }\n  };\n\n  include(HTML5AudioPlayer, Pubsub);\n  include(HTML5AudioPlayer, AudioAttributes);\n\n  /**\n   * Default settings object\n   * @type {Object}\n   */\n  var settings = {\n    /**\n     * {String} path to Flash audio player SWF file\n     */\n    swf_path: '/swf/audiojs.swf',\n    /**\n     * {Boolean} flag indicating whether to throw errors to the page or trigger an error event\n     */\n    throw_errors: true,\n    /**\n     * {Boolean} flag indicating whether to format player duration and position to hh:mm:ss or pass as raw seconds\n     */\n    format_time: true,\n    /**\n     * {Array} list of codecs to try and use when initializing the player. Used to selectively initialize the internal audio player based on codec support\n     */\n    codecs: ['mp3']\n  };\n\n  /**\n   * Audio5js Audio Player\n   * @param {Object} s player settings object\n   * @constructor\n   */\n  Audio5js = function (s) {\n    s = s || {};\n    var k;\n    for (k in settings) {\n      if (settings.hasOwnProperty(k) && !s.hasOwnProperty(k)) {\n        s[k] = settings[k];\n      }\n    }\n    this.init(s);\n  };\n\n  /**\n   * Check if browser can play a given audio mime type.\n   * @param {String} mime_type audio mime type to check.\n   * @return {Boolean} is audio mime type supported by browser or not\n   */\n  Audio5js.can_play = function (mime_type) {\n    return util.can_play(mime_type);\n  };\n\n  Audio5js.prototype = {\n    /**\n     * Initialize player instance.\n     * @param {Object} s player settings object\n     */\n    init: function (s) {\n      this.ready = false;\n      this.settings = s;\n      this.audio = this.getPlayer();\n      this.bindAudioEvents();\n      if (this.settings.use_flash) {\n        this.audio.init(s.swf_path);\n      } else {\n        this.audio.init();\n      }\n    },\n    /**\n     * Gets a new audio player instance based on codec support as defined in settings.codecs array.\n     * Defaults to MP3 player either HTML or Flash based.\n     * @return {FlashAudioPlayer,HTML5AudioPlayer} audio player instance\n     */\n    getPlayer: function () {\n      var i, l, player, codec;\n      if(this.settings.use_flash){\n        player = new FlashAudioPlayer();\n        this.settings.player = {\n          engine: 'flash',\n          codec: 'mp3'\n        };\n      } else {\n        for (i = 0, l = this.settings.codecs.length; i < l; i++) {\n          codec = this.settings.codecs[i];\n          if (Audio5js.can_play(codec)) {\n            player = new HTML5AudioPlayer();\n            this.settings.use_flash = false;\n            this.settings.player = {\n              engine: 'html',\n              codec: codec\n            };\n            break;\n          }\n        }\n        if (player === undefined) {\n          // here we double check for mp3 support instead of defaulting to Flash in case user overrode the settings.codecs array with an empty array.\n          this.settings.use_flash = !Audio5js.can_play('mp3');\n          player = this.settings.use_flash ? new FlashAudioPlayer() : new HTML5AudioPlayer();\n          this.settings.player = {\n            engine: (this.settings.use_flash ? 'flash' : 'html'),\n            codec: 'mp3'\n          };\n        }\n      }\n      return player;\n    },\n    /**\n     * Bind events from audio object to internal callbacks\n     */\n    bindAudioEvents: function () {\n      this.audio.on('ready', this.onReady, this);\n      this.audio.on('loadstart', this.onLoadStart, this);\n      this.audio.on('loadedmetadata', this.onLoadedMetadata, this);\n      this.audio.on('play', this.onPlay, this);\n      this.audio.on('pause', this.onPause, this);\n      this.audio.on('ended', this.onEnded, this);\n      this.audio.on('canplay', this.onCanPlay, this);\n      this.audio.on('timeupdate', this.onTimeUpdate, this);\n      this.audio.on('progress', this.onProgress, this);\n      this.audio.on('error', this.onError, this);\n      this.audio.on('seeking', this.onSeeking, this);\n      this.audio.on('seeked', this.onSeeked, this);\n    },\n    /**\n     * Bind events from audio object to internal callbacks\n     */\n    unbindAudioEvents: function () {\n      this.audio.off('ready', this.onReady);\n      this.audio.off('loadstart', this.onLoadStart);\n      this.audio.off('loadedmetadata', this.onLoadedMetadata);\n      this.audio.off('play', this.onPlay);\n      this.audio.off('pause', this.onPause);\n      this.audio.off('ended', this.onEnded);\n      this.audio.off('canplay', this.onCanPlay);\n      this.audio.off('timeupdate', this.onTimeUpdate);\n      this.audio.off('progress', this.onProgress);\n      this.audio.off('error', this.onError);\n      this.audio.off('seeking', this.onSeeking);\n      this.audio.off('seeked', this.onSeeked);\n    },\n    /**\n     * Load audio from URL\n     * @param {String} url URL of audio to load\n     */\n    load: function (url) {\n      var that = this,\n          f = function(u){\n            that.audio.load(u);\n            that.trigger('load');\n          };\n\n      if(this.ready){\n        f(url);\n      } else {\n        this.on('ready', f);\n      }\n    },\n    /**\n     * Play audio\n     */\n    play: function () {\n      if(!this.playing){\n        this.audio.play();\n      }\n    },\n    /**\n     * Pause audio\n     */\n    pause: function () {\n      if(this.playing){\n        this.audio.pause();\n      }\n    },\n    /**\n     * Toggle audio play / pause\n     */\n    playPause: function () {\n      this[this.playing ? 'pause' : 'play']();\n    },\n    /**\n     * Get / Set audio volume\n     * @param {Float} v audio volume to set between 0 - 1.\n     * @return {Float} current audio volume\n     */\n    volume: function (v) {\n      if (v !== undefined && !isNaN(parseInt(v, 10))) {\n        this.audio.volume(v);\n        this.vol = v;\n      } else {\n        return this.vol;\n      }\n    },\n    /**\n     * Seek audio to position\n     * @param {Float} position audio position in seconds to seek to.\n     */\n    seek: function (position) {\n      this.audio.seek(position);\n      this.position = position;\n    },\n    /**\n     * Destroy audio object and remove from DOM\n     */\n    destroy: function() {\n      this.unbindAudioEvents();\n      this.audio.destroyAudio();\n    },\n    /**\n     * Callback for audio ready event. Indicates audio is ready for playback.\n     * Looks for ready callback in settings object and invokes it in the context of player instance\n     */\n    onReady: function () {\n      this.ready = true;\n      if (typeof (this.settings.ready) === 'function') {\n        this.settings.ready.call(this, this.settings.player);\n      }\n      this.trigger('ready');\n    },\n    /**\n     * Audio load start event handler\n     */\n    onLoadStart: function(){\n      this.trigger('loadstart');\n    },\n    /**\n     * Audio metadata loaded event handler\n     */\n    onLoadedMetadata: function(){\n      this.trigger('loadedmetadata');\n    },\n    /**\n     * Audio play event handler\n     */\n    onPlay: function () {\n      this.playing = true;\n      this.trigger('play');\n    },\n    /**\n     * Audio pause event handler\n     */\n    onPause: function () {\n      this.playing = false;\n      this.trigger('pause');\n    },\n    /**\n     * Playback end event handler\n     */\n    onEnded: function () {\n      this.playing = false;\n      this.trigger('ended');\n    },\n    /**\n     * Audio error event handler\n     */\n    onError: function () {\n      var error = new AudioError('Audio Error. Failed to Load Audio');\n      if (this.settings.throw_errors) {\n        throw error;\n      } else {\n        this.trigger('error', error);\n      }\n    },\n    /**\n     * Audio canplay event handler. Triggered when enough audio has been loaded to by played.\n     */\n    onCanPlay: function () {\n      this.trigger('canplay');\n    },\n    /**\n     * Audio seeking event handler\n     */\n    onSeeking: function(){\n      this.trigger('seeking');\n    },\n    /**\n     * Audio seeked event handler\n     */\n    onSeeked: function(){\n      this.trigger('seeked');\n    },\n    /**\n     * Playback time update event handler\n     * @param {Float} position play head position (sec)\n     * @param {Float} duration audio duration (sec)\n     */\n    onTimeUpdate: function (position, duration) {\n      this.position = this.settings.format_time ? util.formatTime(position) : position;\n      if (this.duration !== duration) {\n        this.duration = this.settings.format_time && duration !== null ? util.formatTime(duration) : duration;\n      }\n      this.trigger('timeupdate', this.position, this.duration);\n    },\n    /**\n     * Audio download progress event handler\n     * @param {Float} loaded audio download percent\n     */\n    onProgress: function (loaded) {\n      this.duration = this.audio.duration;\n      this.load_percent = loaded;\n      this.trigger('progress', loaded);\n    }\n  };\n\n  include(Audio5js, Pubsub);\n  include(Audio5js, AudioAttributes);\n\n  return Audio5js;\n\n}));\n","/*! npm.im/intervalometer */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction intervalometer(cb, request, cancel, requestParameter) {\n\tvar requestId;\n\tvar previousLoopTime;\n\tfunction loop(now) {\n\t\t// must be requested before cb() because that might call .stop()\n\t\trequestId = request(loop, requestParameter);\n\n\t\t// called with \"ms since last call\". 0 on start()\n\t\tcb(now - (previousLoopTime || now));\n\n\t\tpreviousLoopTime = now;\n\t}\n\treturn {\n\t\tstart: function start() {\n\t\t\tif (!requestId) { // prevent double starts\n\t\t\t\tloop(0);\n\t\t\t}\n\t\t},\n\t\tstop: function stop() {\n\t\t\tcancel(requestId);\n\t\t\trequestId = null;\n\t\t\tpreviousLoopTime = 0;\n\t\t}\n\t};\n}\n\nfunction frameIntervalometer(cb) {\n\treturn intervalometer(cb, requestAnimationFrame, cancelAnimationFrame);\n}\n\nfunction timerIntervalometer(cb, delay) {\n\treturn intervalometer(cb, setTimeout, clearTimeout, delay);\n}\n\nexports.intervalometer = intervalometer;\nexports.frameIntervalometer = frameIntervalometer;\nexports.timerIntervalometer = timerIntervalometer;","/*! npm.im/iphone-inline-video */\n'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar Symbol = _interopDefault(require('poor-mans-symbol'));\nvar intervalometer = require('intervalometer');\n\nfunction preventEvent(element, eventName, toggleProperty, preventWithProperty) {\n\tfunction handler(e) {\n\t\tif (Boolean(element[toggleProperty]) === Boolean(preventWithProperty)) {\n\t\t\te.stopImmediatePropagation();\n\t\t\t// console.log(eventName, 'prevented on', element);\n\t\t}\n\t\tdelete element[toggleProperty];\n\t}\n\telement.addEventListener(eventName, handler, false);\n\n\t// Return handler to allow to disable the prevention. Usage:\n\t// const preventionHandler = preventEvent(el, 'click');\n\t// el.removeEventHandler('click', preventionHandler);\n\treturn handler;\n}\n\nfunction proxyProperty(object, propertyName, sourceObject, copyFirst) {\n\tfunction get() {\n\t\treturn sourceObject[propertyName];\n\t}\n\tfunction set(value) {\n\t\tsourceObject[propertyName] = value;\n\t}\n\n\tif (copyFirst) {\n\t\tset(object[propertyName]);\n\t}\n\n\tObject.defineProperty(object, propertyName, {get: get, set: set});\n}\n\nfunction proxyEvent(object, eventName, sourceObject) {\n\tsourceObject.addEventListener(eventName, function () { return object.dispatchEvent(new Event(eventName)); });\n}\n\nfunction dispatchEventAsync(element, type) {\n\tPromise.resolve().then(function () {\n\t\telement.dispatchEvent(new Event(type));\n\t});\n}\n\n// iOS 10 adds support for native inline playback + silent autoplay\nvar isWhitelisted = /iPhone|iPod/i.test(navigator.userAgent) && !matchMedia('(-webkit-video-playable-inline)').matches;\n\nvar ಠ = Symbol();\nvar ಠevent = Symbol();\nvar ಠplay = Symbol('nativeplay');\nvar ಠpause = Symbol('nativepause');\n\n/**\n * UTILS\n */\n\nfunction getAudioFromVideo(video) {\n\tvar audio = new Audio();\n\tproxyEvent(video, 'play', audio);\n\tproxyEvent(video, 'playing', audio);\n\tproxyEvent(video, 'pause', audio);\n\taudio.crossOrigin = video.crossOrigin;\n\n\t// 'data:' causes audio.networkState > 0\n\t// which then allows to keep <audio> in a resumable playing state\n\t// i.e. once you set a real src it will keep playing if it was if .play() was called\n\taudio.src = video.src || video.currentSrc || 'data:';\n\n\t// if (audio.src === 'data:') {\n\t//   TODO: wait for video to be selected\n\t// }\n\treturn audio;\n}\n\nvar lastRequests = [];\nvar requestIndex = 0;\nvar lastTimeupdateEvent;\n\nfunction setTime(video, time, rememberOnly) {\n\t// allow one timeupdate event every 200+ ms\n\tif ((lastTimeupdateEvent || 0) + 200 < Date.now()) {\n\t\tvideo[ಠevent] = true;\n\t\tlastTimeupdateEvent = Date.now();\n\t}\n\tif (!rememberOnly) {\n\t\tvideo.currentTime = time;\n\t}\n\tlastRequests[++requestIndex % 3] = time * 100 | 0 / 100;\n}\n\nfunction isPlayerEnded(player) {\n\treturn player.driver.currentTime >= player.video.duration;\n}\n\nfunction update(timeDiff) {\n\tvar player = this;\n\t// console.log('update', player.video.readyState, player.video.networkState, player.driver.readyState, player.driver.networkState, player.driver.paused);\n\tif (player.video.readyState >= player.video.HAVE_FUTURE_DATA) {\n\t\tif (!player.hasAudio) {\n\t\t\tplayer.driver.currentTime = player.video.currentTime + ((timeDiff * player.video.playbackRate) / 1000);\n\t\t\tif (player.video.loop && isPlayerEnded(player)) {\n\t\t\t\tplayer.driver.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\tsetTime(player.video, player.driver.currentTime);\n\t} else if (player.video.networkState === player.video.NETWORK_IDLE && !player.video.buffered.length) {\n\t\t// this should happen when the source is available but:\n\t\t// - it's potentially playing (.paused === false)\n\t\t// - it's not ready to play\n\t\t// - it's not loading\n\t\t// If it hasAudio, that will be loaded in the 'emptied' handler below\n\t\tplayer.video.load();\n\t\t// console.log('Will load');\n\t}\n\n\t// console.assert(player.video.currentTime === player.driver.currentTime, 'Video not updating!');\n\n\tif (player.video.ended) {\n\t\tdelete player.video[ಠevent]; // allow timeupdate event\n\t\tplayer.video.pause(true);\n\t}\n}\n\n/**\n * METHODS\n */\n\nfunction play() {\n\t// console.log('play');\n\tvar video = this;\n\tvar player = video[ಠ];\n\n\t// if it's fullscreen, use the native player\n\tif(Document.fullscreenElement) {\n\t\tvideo[ಠplay]();\n\t\treturn;\n\t}\n\t/*\n\tif (video.webkitDisplayingFullscreen) {\n\t\tvideo[ಠplay]();\n\t\treturn;\n\t}\n\t*/\n\n\tif (player.driver.src !== 'data:' && player.driver.src !== video.src) {\n\t\t// console.log('src changed on play', video.src);\n\t\tsetTime(video, 0, true);\n\t\tplayer.driver.src = video.src;\n\t}\n\n\tif (!video.paused) {\n\t\treturn;\n\t}\n\tplayer.paused = false;\n\n\tif (!video.buffered.length) {\n\t\t// .load() causes the emptied event\n\t\t// the alternative is .play()+.pause() but that triggers play/pause events, even worse\n\t\t// possibly the alternative is preventing this event only once\n\t\tvideo.load();\n\t}\n\n\tplayer.driver.play();\n\tplayer.updater.start();\n\n\tif (!player.hasAudio) {\n\t\tdispatchEventAsync(video, 'play');\n\t\tif (player.video.readyState >= player.video.HAVE_ENOUGH_DATA) {\n\t\t\t// console.log('onplay');\n\t\t\tdispatchEventAsync(video, 'playing');\n\t\t}\n\t}\n}\nfunction pause(forceEvents) {\n\t// console.log('pause');\n\tvar video = this;\n\tvar player = video[ಠ];\n\n\tplayer.driver.pause();\n\tplayer.updater.stop();\n\n\t// if it's fullscreen, the developer the native player.pause()\n\t// This is at the end of pause() because it also\n\t// needs to make sure that the simulation is paused\n\t/*\n\tif (video.webkitDisplayingFullscreen) {\n\t\tvideo[ಠpause]();\n\t}\n\t*/\n\t\n\tif(Document.fullscreenElement) {\n\t\tvideo[ಠpause]();\n\t}\n\n\tif (player.paused && !forceEvents) {\n\t\treturn;\n\t}\n\n\tplayer.paused = true;\n\tif (!player.hasAudio) {\n\t\tdispatchEventAsync(video, 'pause');\n\t}\n\tif (video.ended) {\n\t\tvideo[ಠevent] = true;\n\t\tdispatchEventAsync(video, 'ended');\n\t}\n}\n\n/**\n * SETUP\n */\n\nfunction addPlayer(video, hasAudio) {\n\tvar player = video[ಠ] = {};\n\tplayer.paused = true; // track whether 'pause' events have been fired\n\tplayer.hasAudio = hasAudio;\n\tplayer.video = video;\n\tplayer.updater = intervalometer.frameIntervalometer(update.bind(player));\n\n\tif (hasAudio) {\n\t\tplayer.driver = getAudioFromVideo(video);\n\t} else {\n\t\tvideo.addEventListener('canplay', function () {\n\t\t\tif (!video.paused) {\n\t\t\t\t// console.log('oncanplay');\n\t\t\t\tdispatchEventAsync(video, 'playing');\n\t\t\t}\n\t\t});\n\t\tplayer.driver = {\n\t\t\tsrc: video.src || video.currentSrc || 'data:',\n\t\t\tmuted: true,\n\t\t\tpaused: true,\n\t\t\tpause: function () {\n\t\t\t\tplayer.driver.paused = true;\n\t\t\t},\n\t\t\tplay: function () {\n\t\t\t\tplayer.driver.paused = false;\n\t\t\t\t// media automatically goes to 0 if .play() is called when it's done\n\t\t\t\tif (isPlayerEnded(player)) {\n\t\t\t\t\tsetTime(video, 0);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget ended() {\n\t\t\t\treturn isPlayerEnded(player);\n\t\t\t}\n\t\t};\n\t}\n\n\t// .load() causes the emptied event\n\tvideo.addEventListener('emptied', function () {\n\t\t// console.log('driver src is', player.driver.src);\n\t\tvar wasEmpty = !player.driver.src || player.driver.src === 'data:';\n\t\tif (player.driver.src && player.driver.src !== video.src) {\n\t\t\t// console.log('src changed to', video.src);\n\t\t\tsetTime(video, 0, true);\n\t\t\tplayer.driver.src = video.src;\n\t\t\t// playing videos will only keep playing if no src was present when .play()’ed\n\t\t\tif (wasEmpty) {\n\t\t\t\tplayer.driver.play();\n\t\t\t} else {\n\t\t\t\tplayer.updater.stop();\n\t\t\t}\n\t\t}\n\t}, false);\n\n\t// stop programmatic player when OS takes over\n\tvideo.addEventListener('webkitbeginfullscreen', function () {\n\t\tif (!video.paused) {\n\t\t\t// make sure that the <audio> and the syncer/updater are stopped\n\t\t\tvideo.pause();\n\n\t\t\t// play video natively\n\t\t\tvideo[ಠplay]();\n\t\t} else if (hasAudio && !player.driver.buffered.length) {\n\t\t\t// if the first play is native,\n\t\t\t// the <audio> needs to be buffered manually\n\t\t\t// so when the fullscreen ends, it can be set to the same current time\n\t\t\tplayer.driver.load();\n\t\t}\n\t});\n\tif (hasAudio) {\n\t\tvideo.addEventListener('webkitendfullscreen', function () {\n\t\t\t// sync audio to new video position\n\t\t\tplayer.driver.currentTime = video.currentTime;\n\t\t\t// console.assert(player.driver.currentTime === video.currentTime, 'Audio not synced');\n\t\t});\n\n\t\t// allow seeking\n\t\tvideo.addEventListener('seeking', function () {\n\t\t\tif (lastRequests.indexOf(video.currentTime * 100 | 0 / 100) < 0) {\n\t\t\t\t// console.log('User-requested seeking');\n\t\t\t\tplayer.driver.currentTime = video.currentTime;\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction overloadAPI(video) {\n\tvar player = video[ಠ];\n\tvideo[ಠplay] = video.play;\n\tvideo[ಠpause] = video.pause;\n\tvideo.play = play;\n\tvideo.pause = pause;\n\tproxyProperty(video, 'paused', player.driver);\n\tproxyProperty(video, 'muted', player.driver, true);\n\tproxyProperty(video, 'playbackRate', player.driver, true);\n\tproxyProperty(video, 'ended', player.driver);\n\tproxyProperty(video, 'loop', player.driver, true);\n\tpreventEvent(video, 'seeking');\n\tpreventEvent(video, 'seeked');\n\tpreventEvent(video, 'timeupdate', ಠevent, false);\n\tpreventEvent(video, 'ended', ಠevent, false); // prevent occasional native ended events\n}\n\nfunction enableInlineVideo(video, hasAudio, onlyWhitelisted) {\n\tif ( hasAudio === void 0 ) hasAudio = true;\n\tif ( onlyWhitelisted === void 0 ) onlyWhitelisted = true;\n\n\tif ((onlyWhitelisted && !isWhitelisted) || video[ಠ]) {\n\t\treturn;\n\t}\n\taddPlayer(video, hasAudio);\n\toverloadAPI(video);\n\tvideo.classList.add('IIV');\n\tif (!hasAudio && video.autoplay) {\n\t\tvideo.play();\n\t}\n\tif (!/iPhone|iPod|iPad/.test(navigator.platform)) {\n\t\tconsole.warn('iphone-inline-video is not guaranteed to work in emulated environments');\n\t}\n}\n\nenableInlineVideo.isWhitelisted = isWhitelisted;\n\nmodule.exports = enableInlineVideo;","/*!\n * jQuery Mousewheel 3.1.13\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n */\n\n(function (factory) {\n    if ( typeof define === 'function' && define.amd ) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node/CommonJS style for Browserify\n        module.exports = factory;\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n\n    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],\n        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?\n                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],\n        slice  = Array.prototype.slice,\n        nullLowestDeltaTimeout, lowestDelta;\n\n    if ( $.event.fixHooks ) {\n        for ( var i = toFix.length; i; ) {\n            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;\n        }\n    }\n\n    var special = $.event.special.mousewheel = {\n        version: '3.1.12',\n\n        setup: function() {\n            if ( this.addEventListener ) {\n                for ( var i = toBind.length; i; ) {\n                    this.addEventListener( toBind[--i], handler, false );\n                }\n            } else {\n                this.onmousewheel = handler;\n            }\n            // Store the line height and page height for this particular element\n            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));\n            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));\n        },\n\n        teardown: function() {\n            if ( this.removeEventListener ) {\n                for ( var i = toBind.length; i; ) {\n                    this.removeEventListener( toBind[--i], handler, false );\n                }\n            } else {\n                this.onmousewheel = null;\n            }\n            // Clean up the data we added to the element\n            $.removeData(this, 'mousewheel-line-height');\n            $.removeData(this, 'mousewheel-page-height');\n        },\n\n        getLineHeight: function(elem) {\n            var $elem = $(elem),\n                $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();\n            if (!$parent.length) {\n                $parent = $('body');\n            }\n            return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;\n        },\n\n        getPageHeight: function(elem) {\n            return $(elem).height();\n        },\n\n        settings: {\n            adjustOldDeltas: true, // see shouldAdjustOldDeltas() below\n            normalizeOffset: true  // calls getBoundingClientRect for each event\n        }\n    };\n\n    $.fn.extend({\n        mousewheel: function(fn) {\n            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');\n        },\n\n        unmousewheel: function(fn) {\n            return this.unbind('mousewheel', fn);\n        }\n    });\n\n\n    function handler(event) {\n        var orgEvent   = event || window.event,\n            args       = slice.call(arguments, 1),\n            delta      = 0,\n            deltaX     = 0,\n            deltaY     = 0,\n            absDelta   = 0,\n            offsetX    = 0,\n            offsetY    = 0;\n        event = $.event.fix(orgEvent);\n        event.type = 'mousewheel';\n\n        // Old school scrollwheel delta\n        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }\n        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }\n        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }\n        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }\n\n        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event\n        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {\n            deltaX = deltaY * -1;\n            deltaY = 0;\n        }\n\n        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy\n        delta = deltaY === 0 ? deltaX : deltaY;\n\n        // New school wheel delta (wheel event)\n        if ( 'deltaY' in orgEvent ) {\n            deltaY = orgEvent.deltaY * -1;\n            delta  = deltaY;\n        }\n        if ( 'deltaX' in orgEvent ) {\n            deltaX = orgEvent.deltaX;\n            if ( deltaY === 0 ) { delta  = deltaX * -1; }\n        }\n\n        // No change actually happened, no reason to go any further\n        if ( deltaY === 0 && deltaX === 0 ) { return; }\n\n        // Need to convert lines and pages to pixels if we aren't already in pixels\n        // There are three delta modes:\n        //   * deltaMode 0 is by pixels, nothing to do\n        //   * deltaMode 1 is by lines\n        //   * deltaMode 2 is by pages\n        if ( orgEvent.deltaMode === 1 ) {\n            var lineHeight = $.data(this, 'mousewheel-line-height');\n            delta  *= lineHeight;\n            deltaY *= lineHeight;\n            deltaX *= lineHeight;\n        } else if ( orgEvent.deltaMode === 2 ) {\n            var pageHeight = $.data(this, 'mousewheel-page-height');\n            delta  *= pageHeight;\n            deltaY *= pageHeight;\n            deltaX *= pageHeight;\n        }\n\n        // Store lowest absolute delta to normalize the delta values\n        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );\n\n        if ( !lowestDelta || absDelta < lowestDelta ) {\n            lowestDelta = absDelta;\n\n            // Adjust older deltas if necessary\n            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n                lowestDelta /= 40;\n            }\n        }\n\n        // Adjust older deltas if necessary\n        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n            // Divide all the things by 40!\n            delta  /= 40;\n            deltaX /= 40;\n            deltaY /= 40;\n        }\n\n        // Get a whole, normalized value for the deltas\n        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);\n        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);\n        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);\n\n        // Normalise offsetX and offsetY properties\n        if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {\n            var boundingRect = this.getBoundingClientRect();\n            offsetX = event.clientX - boundingRect.left;\n            offsetY = event.clientY - boundingRect.top;\n        }\n\n        // Add information to the event object\n        event.deltaX = deltaX;\n        event.deltaY = deltaY;\n        event.deltaFactor = lowestDelta;\n        event.offsetX = offsetX;\n        event.offsetY = offsetY;\n        // Go ahead and set deltaMode to 0 since we converted to pixels\n        // Although this is a little odd since we overwrite the deltaX/Y\n        // properties with normalized deltas.\n        event.deltaMode = 0;\n\n        // Add event and delta to the front of the arguments\n        args.unshift(event, delta, deltaX, deltaY);\n\n        // Clearout lowestDelta after sometime to better\n        // handle multiple device types that give different\n        // a different lowestDelta\n        // Ex: trackpad = 3 and mouse wheel = 120\n        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }\n        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);\n\n        return ($.event.dispatch || $.event.handle).apply(this, args);\n    }\n\n    function nullLowestDelta() {\n        lowestDelta = null;\n    }\n\n    function shouldAdjustOldDeltas(orgEvent, absDelta) {\n        // If this is an older event and the delta is divisable by 120,\n        // then we are assuming that the browser is treating this as an\n        // older mouse wheel event and that we should divide the deltas\n        // by 40 to try and get a more usable deltaFactor.\n        // Side note, this actually impacts the reported scroll distance\n        // in older browsers and can cause scrolling to be slower than native.\n        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.\n        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;\n    }\n\n}));\n","'use strict';\n\nvar index = typeof Symbol === 'undefined' ? function (description) {\n\treturn '@' + (description || '@') + Math.random();\n} : Symbol;\n\nmodule.exports = index;","/* globals document */\n/**\n * Finds all elements with a \"data-module-init\" attribute\n * and calls the corresponding script\n */\n\n\n\nfunction initializeModules() {\n  var modules = document.querySelectorAll( \"[data-module-init]\" );\n\n  for ( var i = 0; i < modules.length; i++ ) {\n    var el = modules[ i ];\n    var names = el.getAttribute( \"data-module-init\" ).split( \" \" );\n    var Module;\n    for ( var j = 0; j < names.length; j++ ) {\n\t \n      try {\n\t\t  \n        Module = require( \"modules/\" + names[ j ] );\n\t\t\n      } catch ( e ) {\n        Module = false;\n        console.log( names[ j ] + \" module does not exist.\" );\n      }\n\t  \n\n      // Initialize the module with the calling element\n      if ( Module ) {\n        new Module( el );\n      }\n    }\n  }\n  unique = false;\n}\n\nmodule.exports = initializeModules;\n","var initializeModules = require( \"./lib/init-modules.js\" );\n\nif ( document.readyState !== \"loading\" ) {\n\tinitializeModules();\n} else {\n\tdocument.addEventListener( \"DOMContentLoaded\", initializeModules );\n}\n\n\n","var settings = require( \"modules/settings\" ),\n\tthrottle = require(\"modules/throttle\"),\n\tAudio5js = require('audio5');\n\n\nvar audio = module.exports = function( el ) {\n\t\tvar $el = $( el ),\n\t\t$window = $( window ),\n\t\tintro,\n\t\taudioOn = true,\n\t\tintroAfter,\n\t\tvol = 100,\n\t\tcredits,\n\t\tintroVol  = 100,\n\t\tintroAfterVol = 100,\n\t\tcreditsVol = 0,\n\t\tintroVolTemp  = 100,\n\t\tintroAfterVolTemp = 100,\n\t\tcreditsVolTemp = 0,\n\t\tfadeInterval;\n\t\t\n\t\t$el.on('click', toggleAudio);\n\t\t\n\t\taudio.init = function(){\n\t\t\t$window.on('resize', winResize);\n\t\t\tinitAudio();\n\t\t}\n\t\t\n\t\tfunction initAudio () {\n\t\t    intro = new Audio5js({\n\t\t      ready: function () {\n\t\t        this.load('assets/audio/intro.mp3');\n\t\t        this.play();\n\t\t\t\tthis.volume(0);\n\t\t      }\n\t\t    });\n\t\t\t\n\t\t\tintro.on('ended', function () { introAfter.play(); }, this);\n\t\t\t\n\t\t    introAfter = new Audio5js({\n\t\t      ready: function () {\n\t\t        this.load('assets/audio/intro-after.mp3');\n\t\t\t\tthis.volume(0);\n\t\t      }\n\t\t    });\n\t\t\t\n\t\t\tintroAfter.on('ended', function(){ introAfter.seek(0); introAfter.play() }, this);\n\t\t\t\n\t\t   credits = new Audio5js({\n\t\t      ready: function () {\n\t\t        this.load('assets/audio/credits.mp3');\n\t\t\t\tthis.play();\n\t\t\t\tthis.volume(0);\n\t\t      }\n\t\t    });\n\t\t\t\n\t\t\tcredits.on('ended', function(){ credits.seek(0); credits.play() }, this);\n\t\t}\n\t\t\n\t\tfunction toggleAudio(){\n\t\t\t$el.toggleClass('active');\n\t\t\t\n\t\t\tif(audioOn) {\n\t\t\t\taudioOn = false;\n\t\t\t\tfadeOut();\n\t\t\t} else {\n\t\t\t\taudioOn = true;\n\t\t\t\tfadeIn();\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\taudio.setVolume = function(instance, _volume) {\n\t\t\t\n\t\t\t\tswitch(instance) {\n\t\t\t\tcase 'intro':\n\t\t\t\t\tintroVol = _volume;\n\t\t\t\t\t//if(audioOn) intro.volume(getVolPercent(_volume)); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 'introAfter':\n\t\t\t\t\tintroAfterVol = _volume;\n\t\t\t\t\t//if(audioOn) introAfter.volume(getVolPercent(_volume)); \n\t\t\t\t\tbreak;\n\t\t\t\tcase 'credits':\n\t\t\t\t\tcreditsVol = _volume;\n\t\t\t\t\t//if(audioOn) credits.volume(getVolPercent(_volume)); \n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n\t\t\t//console.log('_volume ' + _volume);\n\t\t}\n\t\t\n\t\tfunction fadeIn() {\n\t\t\t\n            fadeInterval = setInterval(function() { \n\t\t\t\t\n\t\t\t\tif(intro.volume() < introVol) {\n\t\t\t\t\tintro.volume(intro.volume() + 1)\n\t\t\t\t} else {\n\t\t\t\t\tintro.volume(introVol)\n\t\t\t\t}\t\n\t\t\t\n\t\t\t\tif(introAfter.volume() < introAfterVol) {\n\t\t\t\t\tintroAfter.volume(introAfter.volume() + 1)\n\t\t\t\t} else {\n\t\t\t\t\tintro.volume(introAfterVol)\n\t\t\t\t}\t\n\t\t\t\n\t\t\t\tif(credits.volume() < creditsVol) {\n\t\t\t\t\tcredits.volume(credits.volume() + 1)\n\t\t\t\t} else {\n\t\t\t\t\tintro.volume(creditsVol)\n\t\t\t\t}\n\t\t\t\n\t\t\t\t//console.log(introAfterVol)\n\t\t\t\t//intro.volume(getVolPercent(introVol));\n\t\t\t\t//introAfter.volume(getVolPercent(introAfterVol));\n\t\t\t\t//credits.volume(getVolPercent(creditsVol));\n\t\t\t\t\n\t\t\t\tif(intro.volume() == introVol && introAfter.volume() == introAfterVol && credits.volume() == creditsVol) {\n\t\t\t\t\t//console.log('clear int')\n\t\t\t\t\tclearInterval(fadeInterval);\n\t\t\t\t\treturn true;\n\t\t\t\t}\t\n\t\t\t\n\t\t\t}, 16);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\tfunction fadeOut() {\n\t\t\t\n            fadeInterval = setInterval(function() { \n\t\t\t\n\t\t\t\tif(introVol > 0) {\n\t\t\t\t\tintroVol -= 1;\n\t\t\t\t} else {\n\t\t\t\t\tintroVol = 0;\n\t\t\t\t}\t\n\t\t\t\n\t\t\t\tif(introAfterVol > 0) {\n\t\t\t\t\tintroAfterVol -= 1;\n\t\t\t\t} else {\n\t\t\t\t\tintroAfterVol = 0;\n\t\t\t\t}\t\n\t\t\t\n\t\t\t\tif(creditsVol > 0) {\n\t\t\t\t\tcreditsVol -= 1;\n\t\t\t\t} else {\n\t\t\t\t\tcreditsVol = 0;\n\t\t\t\t}\n\t\t\t\n\t\t\t\t//console.log(introAfterVol)\n\t\t\t\tintro.volume(getVolPercent(introVol));\n\t\t\t\tintroAfter.volume(getVolPercent(introAfterVol));\n\t\t\t\tcredits.volume(getVolPercent(creditsVol));\n\t\t\t\t\n\t\t\t\tif(introVol == 0 && introAfterVol == 0 && creditsVol == 0) {\n\t\t\t\t\t//console.log('clear int')\n\t\t\t\t\tclearInterval(fadeInterval);\n\t\t\t\t\treturn true;\n\t\t\t\t}\t\n\t\t\t\n\t\t\t}, 16);\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction getVolPercent(_volume) {\n\t\t\treturn _volume / 100;\n\t\t}\n\t\t\n\t\n\t\t\n\t\tfunction winResize(){\n\t\t\t\n\t\t\tif( $window.height() * 1.5 < $window.width() ) {\n\t\t\t\t$('body').addClass('landscape-format');\n\t\t\t} else {\n\t\t\t\t$('body').removeClass('landscape-format')\n\t\t\t}\n\t\t\t\t\n\t\t}\n\n\t\t\n\t\t\n\t\t\n};\n  ","var settings = require( \"modules/settings\" ),\n\tthrottle = require(\"modules/throttle\");\n\n\nmodule.exports = function( el ) {\n\t\tvar $el = $( el ),\n\t\t$window = $( window );\n\t\t\n\t\tfunction init(){\n\t\t\t$window.on('resize', winResize);\n\t\t\t//$('.wrapper').stop().fadeIn(3000);\n\t\t\t$('.wrapper').show().addClass('fade-in');\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction winResize(){\n\t\t\t\n\t\t\tif( $window.height() * 1.5 < $window.width() ) {\n\t\t\t\t$('body').addClass('landscape-format');\n\t\t\t} else {\n\t\t\t\t$('body').removeClass('landscape-format')\n\t\t\t}\n\t\t\t\t\n\t\t}\n\n\t\t\n\t\twinResize();\n\t\tinit();\n\t\t\n};\n  ","var makeVideoPlayableInline = require('iphone-inline-video'),\n\tsettings = require('modules/settings'),\n\tmousewheel = require('jquery-mousewheel')($),\n\taudio = require(\"modules/audio\");\n\nvar controlScroll = module.exports = function( el ) {\n\t\tvar $el = $( el ),\n\t\t$window = $( window ),\n\t\t$controlScrollcroll = $el.find('.video-scroll'),\n\t\t$videoWidth = $('.video-holder').width(),\n\t\tvidScrollWidth = 0,\n\t\txListener = 0,\n\t\txPos = 0,\n\t\tscrollInt,\n\t\tinitLoad = true,\n\t\tautoScrollTimer,\n\t\tautoScroll = false,\n\t\tlast_position = {},\n\t\t$scrollContainer = $('.wrapper'),\n\t\tst = 0;\n\n\t\tconsole.log('%c[control-scroll module init]', 'color:blue;');\n\t\t\n\t\tcontrolScroll.setScrollContainer = function(scrollContainer) {\n\t\t\t$scrollContainer = scrollContainer;\n\t\t}\n\t\t\n\t\tcontrolScroll.scroll = function(y) {\n\t\t\tst = y;\n\t\t\t//console.log(st);\n\t\t\tthis.fadeOverlay();\n\t\t\tthis.checkScrollPos();\n\t\t}\n\t\t\n\t\tcontrolScroll.scrollTo = function(y) {\n\t\t\tcontrolScroll.scroll(y);\n\t\t\tif(!settings.isMobile) {\n\t\t\t\t$scrollContainer.scrollTop(y);\n\t\t\t} else {\n\t\t\t\tsettings.scroller.scrollTo(0, -y)\n\t\t\t\t//settings.scroller[0].scrollTo(y)\n\t\t\t\t//settings.scroller.scrollTo(y);\n\t\t\t\t//$scrollContainer.scrollTo(y);\n\t\t\t}\n\t\t}\n\t\t\n\t\tcontrolScroll.scrollMobile = function(scroller, y) {\n\t\t\t//scroller.scrollTo(0, y);\n\t\t}\n\t\t\n\t\tcontrolScroll.fadeOverlay = function() {\n\t\t\t//st = y;\n\t\t\t\n\t\t\t//console.log('st ' +scrollContainer[0].scrollHeight);\n\t\t\t\n\t\t\tif(!$scrollContainer.hasClass('looped')) {\n\t\t\t\tif(st < $window.height()) {\n\t\t\t\t\t$('.top-section.bottom-fixed').css('opacity', 0).removeClass('show');\n\t\t\t\t\tvar op = (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t\t\n\t\t\t\t\tvar volume = op.toFixed(2) * 100;\n\t\t\t\t\t\n\t\t\t\t\taudio.setVolume('intro', 100 - volume);\n\t\t\t\t\taudio.setVolume('introAfter', 100 - volume);\n\t\t\t\t\taudio.setVolume('credits', volume);\n\t\t\t\t\t//audio.setVolume('credits', 1 - volume);\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( st < $window.height() * 2) {\n\t\t\t\t\n\t\t\t\t\tvar op = st - $window.height() + (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('below two times')\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - ($window.height() * 2 ) ) {\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height()  )\n\t\t\t\t//console.log( $scrollContainer[0].scrollHeight / (st + $window.height()) )\n\t\t\t\t//console.log($scrollContainer[0].scrollHeight);\n\t\t\t\t//console.log(st + $window.height());\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  )/ $window.height()  )\n\t\t\t\t//console.log( ($scrollContainer[0].scrollHeight - st) / ( $scrollContainer[0].scrollHeight - $window.height()) )\n\t\t\t\t\n\t\t\t\t//console.log('at end of page')\n\t\t\t\t\n\t\t\t\tvar op = ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height();\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvar volume = op.toFixed(2) * 100;\n\t\t\t\t\n\t\t\t\taudio.setVolume('intro', 100 - volume);\n\t\t\t\taudio.setVolume('introAfter', 100 - volume);\n\t\t\t\taudio.setVolume('credits', volume);\n\t\t\t\t\n\t\t\t\t//console.log(op);\n\t\t\t\t\n\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t$('.top-section.bottom-fixed').addClass('show').css('opacity', 1 - op);\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tcontrolScroll.checkScrollPos = function(){\n\t\t\tclearInterval(scrollInt);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif(st < $window.height()) {\n\t\t\t\t\n\t\t\t\t//$('body').scrollTop($('body')[0].scrollHeight);\n\t\t\t}\n\t\t\t\n\t\t\tif($scrollContainer.hasClass('looped')) {\n\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\n\t\t\t\tif(st > $window.height()) {\n\t\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\t//$scrollContainer.scrollTop(0);\n\t\t\t\t} \n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - $window.height()) {\n\t\t\t\t$scrollContainer.addClass('looped');\n\t\t\t\t$scrollContainer.animate({ scrollTop:0 }, 0)\n\t\t\t\t$scrollContainer.scrollTop(0);\n\t\t\t\tst = 0;\n\t\t\t\t//$('.top-section.bottom-fixed').css('opacity', 0)\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t/*\n\t\tfunction checkScrollPos(){\n\t\t\tclearInterval(scrollInt);\n\t\t\tvar st = $scrollContainer.scrollTop();\n\t\t\t\n\t\t\t\n\t\t\tif(st < $window.height()) {\n\t\t\t\t$('.top-section.bottom-fixed').css('opacity', 0).removeClass('show');\n\t\t\t\t//$('body').scrollTop($('body')[0].scrollHeight);\n\t\t\t}\n\t\t\t\n\t\t\tif($scrollContainer.hasClass('looped')) {\n\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\n\t\t\t\tif(st > $window.height()) {\n\t\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\t//$scrollContainer.scrollTop(0);\n\t\t\t\t} \n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - $window.height()) {\n\t\t\t\t$('.wrapper').addClass('looped');\n\t\t\t\t$scrollContainer.animate({ scrollTop:0 }, 0)\n\t\t\t\t$scrollContainer.scrollTop(0);\n\t\t\t\t//$('.top-section.bottom-fixed').css('opacity', 0)\n\t\t\t}\n\t\t}\n\t\t*/\n\t\t\n\t\t/*\n\t\tfunction fadeOverlay(){\n\t\t\tvar st = $scrollContainer.scrollTop();\n\t\t\tif(!$scrollContainer.hasClass('looped')) {\n\t\t\t\tif(st < $window.height()) {\n\t\t\t\t\n\t\t\t\t\tvar op = (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( st < $window.height() * 2) {\n\t\t\t\t\n\t\t\t\t\tvar op = st - $window.height() + (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - ($window.height() * 2 ) ) {\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height()  )\n\t\t\t\t//console.log( $scrollContainer[0].scrollHeight / (st + $window.height()) )\n\t\t\t\t//console.log($scrollContainer[0].scrollHeight);\n\t\t\t\t//console.log(st + $window.height());\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  )/ $window.height()  )\n\t\t\t\t//console.log( ($scrollContainer[0].scrollHeight - st) / ( $scrollContainer[0].scrollHeight - $window.height()) )\n\t\t\t\tvar op = ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height();\n\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t$('.top-section.bottom-fixed').addClass('show').css('opacity', 1 - op);\n\t\t\t}\n\t\t}\n\t\t*/\n\t\t\n\t\tcontrolScroll.stopAutoScroll = function(){\n\t\t\tclearInterval(scrollInt);\n\t\t\t$('body').removeClass('autoScroll');\n\t\t\tsetTimeout(function(){ $('body').removeClass('scrolling autoScroll'); }, 100);\n\t\t\tautoScroll = false;\n\t\t\tclearTimeout(autoScrollTimer);\n\t\t\tautoScrollTimer = setTimeout(function(){\n\t\t\t\tautoScroll = true;\n\t\t\t}, 10000);\n\t\t}\n\t\t\n\t\tfunction startAutoScroll(){\n\t\t\t$('body').addClass('autoScroll');\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t/*\n\t\t$window.on('mousedown touchstart', function(event){\n\t\t\t$('body').addClass('mousedown');\n\t\t\t\n\t\t\t$window.on('mousemove', winMouseMove);\n\t\t\t\n\t\t\tstopAutoScroll();\n\t\t}).on('mouseup touchend', function(){\n\t\t\t$('body').removeClass('mousedown');\n\t\t\t$window.off('mousemove');\n\t\t});\n\t\t*/\n\t\t\n\n\t\t\n\t\t\n\t\t$window.on('mousewheel touchmove touchstart', function(event){\n\t\t\t\n\t\t\tcontrolScroll.stopAutoScroll();\n\t\t\t\n\t\t\tif(event.type == 'mousewheel') {\n\t\t\t\tif(event.deltaY < 0) {\n\t\t\t\t\txPos += event.deltaY;\n\t\t\t\t\txListener += event.deltaY;\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif(event.deltaX > 1) {\n\t\t\t\t\txPos -= event.deltaX;\n\t\t\t\t\txListener -= event.deltaX;\n\t\t\t\t}\n\t\t\t} else if(event.type == 'touchmove') {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t//ereturn true;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t//console.log(event.type)\n\t\t\t$('body').addClass('scrolling');\n\t\t\t\n\t\t\tclearTimeout($.data(this, 'timer'));\n\t\t\t  $.data(this, 'timer', setTimeout(function() {\n\t\t\t\t  $('body').removeClass('scrolling');\n\t\t\t     //do something\n\t\t\t  }, 250));\n\t\t\t  \n\t\t\t//checkScrollPos()  \n\t\t\t//stopAutoScroll();\n\t\t});\n\t\t\n\t\t/*\n\t\t$window.on('mousewheel touchmove', function(event){\n\t\t\t\n\t\t\t\n\t\t\tif(event.type == 'mousewheel') {\n\t\t\t\tif(event.deltaY < 0) {\n\t\t\t\t\txPos += event.deltaY;\n\t\t\t\t\txListener += event.deltaY;\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif(event.deltaX > 1) {\n\t\t\t\t\txPos -= event.deltaX;\n\t\t\t\t\txListener -= event.deltaX;\n\t\t\t\t}\n\t\t\t} else if(event.type == 'touchmove') {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t//console.log(event.type)\n\t\t\t$('body').addClass('scrolling');\n\t\t\t\n\t\t\tclearTimeout($.data(this, 'timer'));\n\t\t\t  $.data(this, 'timer', setTimeout(function() {\n\t\t\t\t  $('body').removeClass('scrolling');\n\t\t\t     //do something\n\t\t\t  }, 250));\n\t\t\t  \n\t\t\tcheckScrollPos()  \n\t\t\tstopAutoScroll();\n\t\t});\n\t\t*/\n\t\n\t\n\t\tcontrolScroll.init = function(){\n\t\t\t\n\t\t\taudio.init();\n\t\t\t\n\t\t\tvar timerSpeed = settings.isMobile ? 6000 : 30000;\n\t\t\t\n\t\t\tautoScrollTimer = setTimeout(function(){\n\t\t\t\tautoScroll = true;\n\t\t\t\tconsole.log('set autoscroll true')\n\t\t\t}, timerSpeed);\n\t\t\t\n\t\t\t\n\t\t\t// Usage\n\t\t\tanimLoop(function( deltaT ) {\n\t\t\t\t  //console.log('animLoop')\n\t\t\t\t\t\n\t\t\t\t  //console.log($window.width())\n\t\t\t\t  //console.log ($('video').eq(0).position().left)\n\t\t\t\t  if(autoScroll) {\n\t\t\t\t\t  st++;\n\t\t\t\t\t  //controlScroll.scroll(st);\n\t\t\t\t\t  //console.log(st);\n\t\t\t\t\t  controlScroll.scrollTo(st);\n\t\t\t\t\t  //console.log('scroll')\n\t\t\t\t\t  //$('input').blur();\n\t\t\t\t\t  //startAutoScroll();\n\t\t\t\t\t  //checkScrollPos();\n\t\t\t\t\t  //fadeOverlay();\n\t\t\t\t  \t // $scrollContainer.scrollTop($scrollContainer.scrollTop() + 1);\n\t\t\t\t\t\n\t\t\t\t  }\n\t\t\t\t  watchcontrolScroll();\n\t\t\t\t  \n\t\t\t    //elem.style.left = ( left += 10 * deltaT / 16 ) + \"px\";\n\n\t\t\t// optional 2nd arg: elem containing the animation\n\t\t\t} );\n\t\t}\n\t\t\n\t\t\n\t\t/*\n\t\tfunction init(){\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tsetcontrolScroll();\n\t\t\tfadeOverlay();\n\t\t\t$('#video-container').fadeIn(6000);\n\t\t\t\n\t\t\t$scrollContainer.on('scroll', function(event) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\t//console.log('scroll triggered')\n\t\t\t\t//var gradientTopPos = $('body').scrollTop();\n\t\t\t\n\t\t\t\tcheckScrollPos();\n\t\t\t\tfadeOverlay();\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\t//console.log(event.deltaX)\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t    watchcontrolScroll();\n\t\t\t\t$('body').addClass('scrolling');\n\t\t\t\n\t\t\t\t//stopAutoScroll();\n\t\t\t  \n\t\t\t  \n\t\t\t    //console.log(event.deltaX, event.deltaY, event.deltaFactor);\n\t\t\t});\n\t\t\t\n\t\t\tautoScrollTimer = setTimeout(function(){\n\t\t\t\tautoScroll = true;\n\t\t\t}, 6000);\n\t\t\t\n\t\t\t// Usage\n\t\t\tanimLoop(function( deltaT ) {\n\t\t\t\txPos -= .2;\n\t\t\t\txListener -= .2;\n\t\t\t\t$('.video-scroll').css({\n\t\t\t\t    \"-webkit-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"-ms-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"transform\":\"translate(\"+xPos+\"px,0)\"\n\t\t\t\t  });​\n\t\t\t\t\t\n\t\t\t\t  //console.log($window.width())\n\t\t\t\t  //console.log ($('video').eq(0).position().left)\n\t\t\t\t  if(autoScroll) {\n\t\t\t\t\t  $('input').blur();\n\t\t\t\t\t  startAutoScroll();\n\t\t\t\t\t  checkScrollPos();\n\t\t\t\t\t  fadeOverlay();\n\t\t\t\t  \t  $scrollContainer.scrollTop($scrollContainer.scrollTop() + 1);\n\t\t\t\t\t  //initLoad = false;\n\t\t\t\t  }\n\t\t\t\t  watchcontrolScroll();\n\t\t\t\t  \n\t\t\t    //elem.style.left = ( left += 10 * deltaT / 16 ) + \"px\";\n\n\t\t\t// optional 2nd arg: elem containing the animation\n\t\t\t} );\n\t\t\t\n\t\t\t$('.newsletter input').on('focus', inputFocus);\n\t\t\t\n\t\t\t$window.on('resize', winResize);\n\t\t\t\n\t\t}\n\t\t*/\n\t\t\n\t\tfunction inputFocus(){\n\t\t\tif(!$('.bottom-fixed').hasClass('show')) {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t}\n\t\t\t$scrollContainer\n\t\t}\n\t\t\n\t\tfunction watchcontrolScroll(){\n\t\t\t\n\t\t\t//console.log( $('.video-1-clone').position().left )\n\t\t\t\n\t\t\t/*\n\t\t\t$('.video-holder').each(function(){\n\t\t\t\tif($(this).position().left + $(this).width() >= 0 && $(this).position().left <= $window.width() ) {\n\t\t\t\t\t$(this).find('video')[0].play();\n\t\t\t\t} else {\n\t\t\t\t\t//console.log($(this).find('video').attr('src'))\n\t\t\t\t\t$(this).find('video')[0].pause();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif( $('.video-1-clone').position().left <= 0 ) {\n\t\t\t\txPos = 0;\n\t\t\t\t\n\t\t\t\t$('.video-scroll').css({\n\t\t\t\t    \"-webkit-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"-ms-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"transform\":\"translate(\"+xPos+\"px,0)\"\n\t\t\t\t  });​\n\t\t\t\t  \n\t\t\t\t\n\t\t\t}\n\t\t\t*/\n\t\t\t\n\t\t\t/*\n\t\t\tif(xPos < -vidScrollWidth ) {\n\t\t\t\txPos = 0;\n\t\t\t\txListener = 0;\n\t\t\t\t$controlScrollcroll.append($('.video-holder').eq(0));\n\t\t\t\t\n\t\t\t\tfor(var i=0; i<$('.video-holder').length; i++) {\n\t\t\t\t\t$('.video-holder').eq(i).css('left', ( $videoWidth * i) + 'px');\n\t\t\t\t}\n\t\t\t\t$('.video-holder').eq(1).find('video')[0].play();\n\t\t\t\tconsole.log('reset entire piece')\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tif(xListener < -$videoWidth) {\n\t\t\t\txListener = 0;\n\t\t\t\tvar _left = Number( $('.video-holder').last().css('left').split('px').join('') ) + $videoWidth;\n\t\t\t\n\t\t\t\t$('.video-holder').eq(2).find('video')[0].play();\n\t\t\t\t$('.video-holder').eq(0).find('video')[0].pause();\n\t\t\t\t$('.video-holder').eq(0).css('left', _left + 'px')\n\t\t\t\t$controlScrollcroll.append($('.video-holder').eq(0));\n\t\t\t}\n\t\t\t*/\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction setcontrolScroll(){\n\t\t\tvidScrollWidth = 0;\n\t\t\t$('.video-holder').each(function(){\n\t\t\t\t$(this).css('left', $(this).width() * $(this).index());\n\t\t\t\tvidScrollWidth += $(this).width(); \n\t\t\t});\n\t\t\t$controlScrollcroll.css('width', vidScrollWidth);\n\t\t\t//console.log(vidScrollWidth);\n\t\t}\n\t\t\n\n\t\t\n\t\n\t\tfunction animLoop( render, element ) {\n\t\t    var running, lastFrame = +new Date;\n\t\t    function loop( now ) {\n\t\t        // stop the loop if render returned false\n\t\t        if ( running !== false ) {\n\t\t            requestAnimationFrame( loop, element );\n\t\t            running = render( now - lastFrame );\n\t\t            lastFrame = now;\n\t\t        }\n\t\t    }\n\t\t    loop( lastFrame );\n\t\t}\n\n\n\t\t\n\t\tfunction winResize(){\n\t\t\t//$videoWidth = $('.video-holder').width();\n\t\t\t//setcontrolScroll();\n\t\t}\n\t\t\n\t\tcontrolScroll.init();\n\t\t\n};\n  ","var makeVideoPlayableInline = require('iphone-inline-video'),\n\tsettings = require('modules/settings'),\n\tmousewheel = require('jquery-mousewheel')($);\n\nvar controlscroll = module.exports = function( el ) {\n\t\tvar $el = $( el ),\n\t\t$window = $( window ),\n\t\t$videoScroll = $el.find('.video-scroll'),\n\t\t$videoWidth = $('.video-holder').width(),\n\t\tvidScrollWidth = 0,\n\t\txListener = 0,\n\t\txPos = 0,\n\t\tscrollInt,\n\t\tinitLoad = true,\n\t\tautoScrollTimer,\n\t\tautoScroll = false,\n\t\tlast_position = {},\n\t\t$scrollContainer = $('.wrapper'),\n\t\tst;\n\n\t\tconsole.log('%c[video module init]', 'color:blue;');\n\t\t\n\t\tcontrolscroll.getName = function(){\n\t\t\treturn 'hi';\n\t\t}\n\t\t\n\t\tcontrolscroll.setScrollContainer = function(scrollContainer){\n\t\t\t$scrollContainer = scrollContainer;\n\t\t}\n\t\t\n\t\tcontrolscroll.scroll = function(y) {\n\t\t\t\n\t\t}\n\t\n\t\t\n\t\tcontrolscroll.fadeOverlay = function(scrollContainer, y) {\n\t\t\tst = y;\n\t\t\t\n\t\t\t//console.log('st ' +scrollContainer[0].scrollHeight);\n\t\t\t\n\t\t\tif(!scrollContainer.hasClass('looped')) {\n\t\t\t\tif(st < $window.height()) {\n\t\t\t\t\t$('.top-section.bottom-fixed').css('opacity', 0).removeClass('show');\n\t\t\t\t\tvar op = (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('below window height');\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( st < $window.height() * 2) {\n\t\t\t\t\n\t\t\t\t\tvar op = st - $window.height() + (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('below two times')\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(st >= scrollContainer[0].scrollHeight - ($window.height() * 2 ) ) {\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height()  )\n\t\t\t\t//console.log( $scrollContainer[0].scrollHeight / (st + $window.height()) )\n\t\t\t\t//console.log($scrollContainer[0].scrollHeight);\n\t\t\t\t//console.log(st + $window.height());\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  )/ $window.height()  )\n\t\t\t\t//console.log( ($scrollContainer[0].scrollHeight - st) / ( $scrollContainer[0].scrollHeight - $window.height()) )\n\t\t\t\t\n\t\t\t\tconsole.log('at end of page')\n\t\t\t\t\n\t\t\t\tvar op = ( scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height();\n\t\t\t\t\n\t\t\t\tconsole.log(op);\n\t\t\t\t\n\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t$('.top-section.bottom-fixed').addClass('show').css('opacity', 1 - op);\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tcontrolscroll.checkScrollPos = function(){\n\t\t\tclearInterval(scrollInt);\n\t\t\tvar st = $scrollContainer.scrollTop();\n\t\t\t\n\t\t\t\n\t\t\tif(st < $window.height()) {\n\t\t\t\t\n\t\t\t\t//$('body').scrollTop($('body')[0].scrollHeight);\n\t\t\t}\n\t\t\t\n\t\t\tif($scrollContainer.hasClass('looped')) {\n\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\n\t\t\t\tif(st > $window.height()) {\n\t\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\t//$scrollContainer.scrollTop(0);\n\t\t\t\t} \n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - $window.height()) {\n\t\t\t\t$('.wrapper').addClass('looped');\n\t\t\t\t$scrollContainer.animate({ scrollTop:0 }, 0)\n\t\t\t\t$scrollContainer.scrollTop(0);\n\t\t\t\t//$('.top-section.bottom-fixed').css('opacity', 0)\n\t\t\t}\n\t\t}\n\t\t\n\n\t\t\n\t\tfunction startAutoScroll(){\n\t\t\t$('body').addClass('autoScroll');\n\t\t}\n\t\t\n\t\tfunction stopAutoScroll(){\n\t\t\t$('body').removeClass('autoScroll');\n\t\t\tsetTimeout(function(){ $('body').removeClass('scrolling autoScroll'); }, 100);\n\t\t\tautoScroll = false;\n\t\t\tclearTimeout(autoScrollTimer);\n\t\t\tautoScrollTimer = setTimeout(function(){\n\t\t\t\tautoScroll = true;\n\t\t\t}, 10000);\n\t\t}\n\n\t\t\n\n\t\t$window.on('mousewheel touchmove touchstart', function(event){\n\t\t\t\n\t\t\t\n\t\t\tif(event.type == 'mousewheel') {\n\t\t\t\tif(event.deltaY < 0) {\n\t\t\t\t\txPos += event.deltaY;\n\t\t\t\t\txListener += event.deltaY;\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif(event.deltaX > 1) {\n\t\t\t\t\txPos -= event.deltaX;\n\t\t\t\t\txListener -= event.deltaX;\n\t\t\t\t}\n\t\t\t} else if(event.type == 'touchmove') {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t//console.log(event.type)\n\t\t\t$('body').addClass('scrolling');\n\t\t\t\n\t\t\tclearTimeout($.data(this, 'timer'));\n\t\t\t  $.data(this, 'timer', setTimeout(function() {\n\t\t\t\t  $('body').removeClass('scrolling');\n\t\t\t     //do something\n\t\t\t  }, 250));\n\t\t\t  \n\t\t\t//checkScrollPos()  \n\t\t\t//stopAutoScroll();\n\t\t});\n\n\t\n\t\t\n\t\t\n\t\t\n\t\tfunction init(){\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tsetVideos();\n\t\t\tfadeOverlay();\n\t\t\t$('#video-container').fadeIn(6000);\n\t\t\t\n\t\t\t$scrollContainer.on('scroll', function(event) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\t//console.log('scroll triggered')\n\t\t\t\t//var gradientTopPos = $('body').scrollTop();\n\t\t\t\n\t\t\t\tcheckScrollPos();\n\t\t\t\tfadeOverlay();\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\t//console.log(event.deltaX)\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t    watchVideos();\n\t\t\t\t$('body').addClass('scrolling');\n\t\t\t\n\t\t\t\t//stopAutoScroll();\n\t\t\t  \n\t\t\t  \n\t\t\t    //console.log(event.deltaX, event.deltaY, event.deltaFactor);\n\t\t\t});\n\t\t\t\n\t\t\tautoScrollTimer = setTimeout(function(){\n\t\t\t\tautoScroll = true;\n\t\t\t}, 6000);\n\t\t\t\n\t\t\t// Usage\n\t\t\tanimLoop(function( deltaT ) {\n\t\t\t\txPos -= .2;\n\t\t\t\txListener -= .2;\n\t\t\t\t$('.video-scroll').css({\n\t\t\t\t    \"-webkit-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"-ms-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"transform\":\"translate(\"+xPos+\"px,0)\"\n\t\t\t\t  });​\n\t\t\t\t\t\n\t\t\t\t  //console.log($window.width())\n\t\t\t\t  //console.log ($('video').eq(0).position().left)\n\t\t\t\t  if(autoScroll) {\n\t\t\t\t\t  //$('input').blur();\n\t\t\t\t\t  startAutoScroll();\n\t\t\t\t\t  checkScrollPos();\n\t\t\t\t\t  fadeOverlay();\n\t\t\t\t  \t  $scrollContainer.scrollTop($scrollContainer.scrollTop() + 1);\n\t\t\t\t\t  //initLoad = false;\n\t\t\t\t  }\n\t\t\t\t  watchVideos();\n\t\t\t\t  \n\t\t\t    //elem.style.left = ( left += 10 * deltaT / 16 ) + \"px\";\n\n\t\t\t// optional 2nd arg: elem containing the animation\n\t\t\t} );\n\t\t\t\n\t\t\t$('.newsletter input').on('focus', inputFocus);\n\t\t\t\n\t\t\t$window.on('resize', winResize);\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction inputFocus(){\n\t\t\tif(!$('.bottom-fixed').hasClass('show')) {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t}\n\t\t\t$scrollContainer\n\t\t}\n\t\t\n\t\tfunction watchVideos(){\n\t\t\t\n\t\t\t//console.log( $('.video-1-clone').position().left )\n\t\t\t/*\n\t\t\t$('.video-holder').each(function(){\n\t\t\t\tif($(this).position().left + $(this).width() >= 0 && $(this).position().left <= $window.width() ) {\n\t\t\t\t\t$(this).find('video')[0].play();\n\t\t\t\t} else {\n\t\t\t\t\t//console.log($(this).find('video').attr('src'))\n\t\t\t\t\t$(this).find('video')[0].pause();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif( $('.video-1-clone').position().left <= 0 ) {\n\t\t\t\txPos = 0;\n\t\t\t\t\n\t\t\t\t$('.video-scroll').css({\n\t\t\t\t    \"-webkit-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"-ms-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"transform\":\"translate(\"+xPos+\"px,0)\"\n\t\t\t\t  });​\n\t\t\t\t  \n\t\t\t\t\n\t\t\t}\n\t\t\t*/\n\t\t\t/*\n\t\t\tif(xPos < -vidScrollWidth ) {\n\t\t\t\txPos = 0;\n\t\t\t\txListener = 0;\n\t\t\t\t$videoScroll.append($('.video-holder').eq(0));\n\t\t\t\t\n\t\t\t\tfor(var i=0; i<$('.video-holder').length; i++) {\n\t\t\t\t\t$('.video-holder').eq(i).css('left', ( $videoWidth * i) + 'px');\n\t\t\t\t}\n\t\t\t\t$('.video-holder').eq(1).find('video')[0].play();\n\t\t\t\tconsole.log('reset entire piece')\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tif(xListener < -$videoWidth) {\n\t\t\t\txListener = 0;\n\t\t\t\tvar _left = Number( $('.video-holder').last().css('left').split('px').join('') ) + $videoWidth;\n\t\t\t\n\t\t\t\t$('.video-holder').eq(2).find('video')[0].play();\n\t\t\t\t$('.video-holder').eq(0).find('video')[0].pause();\n\t\t\t\t$('.video-holder').eq(0).css('left', _left + 'px')\n\t\t\t\t$videoScroll.append($('.video-holder').eq(0));\n\t\t\t}\n\t\t\t*/\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction setVideos(){\n\t\t\tvidScrollWidth = 0;\n\t\t\t$('.video-holder').each(function(){\n\t\t\t\t$(this).css('left', $(this).width() * $(this).index());\n\t\t\t\tvidScrollWidth += $(this).width(); \n\t\t\t});\n\t\t\t$videoScroll.css('width', vidScrollWidth);\n\t\t\t//console.log(vidScrollWidth);\n\t\t}\n\t\t\n\t\t/*\n\t\tsetInterval(function(){\n\t\t\txPos-= 1;\n\t\t\t$('.video-scroll').css({\n\t\t\t    \"-webkit-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t    \"-ms-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t    \"transform\":\"translate(\"+xPos+\"px,0)\"\n\t\t\t  });​\n\t\t}, 10);\n\t\t*/\n\t\t\n\t\n\t\tfunction animLoop( render, element ) {\n\t\t    var running, lastFrame = +new Date;\n\t\t    function loop( now ) {\n\t\t        // stop the loop if render returned false\n\t\t        if ( running !== false ) {\n\t\t            requestAnimationFrame( loop, element );\n\t\t            running = render( now - lastFrame );\n\t\t            lastFrame = now;\n\t\t        }\n\t\t    }\n\t\t    loop( lastFrame );\n\t\t}\n\n\t\t\n\t\t\n\t\t/*\n\t\t$('.video-scroll').velocity({\n\t\t\ttranslateZ: 0, // Force HA by animating a 3D property\n\t\t    translateX: \"-10000px\"\n\t\t}, {\n\t\t    \n\t\t\tduration:100000,\n\t\t    easing: \"linear\",\n\t\t});\n\t\t*/\n\t\t\n\t\tfunction winResize(){\n\t\t\t$videoWidth = $('.video-holder').width();\n\t\t\tsetVideos();\n\t\t}\n\t\t\n\t\tif(!settings.isMobile) {\n\t\t\tinit();\n\t\t}\n\t\t\n};\n  ","var makeVideoPlayableInline = require('iphone-inline-video'),\n\tsettings = require('modules/settings'),\n\tmousewheel = require('jquery-mousewheel')($),\n\tcontrolScroll = require(\"modules/control-scroll\"),\n\tvideos = require(\"modules/videos\"),\n\tform = require(\"modules/form\")\n\nvar desktopScroll = module.exports = function( el ) {\n\t\tvar $el = $( el ),\n\t\t$window = $( window ),\n\t\t$videoScroll = $el.find('.video-scroll'),\n\t\t$videoWidth = $('.video-holder').width(),\n\t\tvidScrollWidth = 0,\n\t\txListener = 0,\n\t\txPos = 0,\n\t\tscrollInt,\n\t\tinitLoad = true,\n\t\tautoScrollTimer,\n\t\tautoScroll = false,\n\t\tlast_position = {},\n\t\t$scrollContainer = $('.wrapper');\n\n\t\tconsole.log('%c[desktop module init]', 'color:blue;');\n\t\t\n\t\t/*\n\t\tfunction checkScrollPos(){\n\t\t\tclearInterval(scrollInt);\n\t\t\tvar st = $scrollContainer.scrollTop();\n\t\t\t\n\t\t\t\n\t\t\tif(st < $window.height()) {\n\t\t\t\t$('.top-section.bottom-fixed').css('opacity', 0).removeClass('show');\n\t\t\t\t//$('body').scrollTop($('body')[0].scrollHeight);\n\t\t\t}\n\t\t\t\n\t\t\tif($scrollContainer.hasClass('looped')) {\n\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\n\t\t\t\tif(st > $window.height()) {\n\t\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\t//$scrollContainer.scrollTop(0);\n\t\t\t\t} \n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - $window.height()) {\n\t\t\t\t$('.wrapper').addClass('looped');\n\t\t\t\t$scrollContainer.animate({ scrollTop:0 }, 0)\n\t\t\t\t$scrollContainer.scrollTop(0);\n\t\t\t\t//$('.top-section.bottom-fixed').css('opacity', 0)\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction fadeOverlay(){\n\t\t\tvar st = $scrollContainer.scrollTop();\n\t\t\tif(!$scrollContainer.hasClass('looped')) {\n\t\t\t\tif(st < $window.height()) {\n\t\t\t\t\n\t\t\t\t\tvar op = (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( st < $window.height() * 2) {\n\t\t\t\t\n\t\t\t\t\tvar op = st - $window.height() + (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - ($window.height() * 2 ) ) {\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height()  )\n\t\t\t\t//console.log( $scrollContainer[0].scrollHeight / (st + $window.height()) )\n\t\t\t\t//console.log($scrollContainer[0].scrollHeight);\n\t\t\t\t//console.log(st + $window.height());\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  )/ $window.height()  )\n\t\t\t\t//console.log( ($scrollContainer[0].scrollHeight - st) / ( $scrollContainer[0].scrollHeight - $window.height()) )\n\t\t\t\tvar op = ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height();\n\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t$('.top-section.bottom-fixed').addClass('show').css('opacity', 1 - op);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction startAutoScroll(){\n\t\t\t$('body').addClass('autoScroll');\n\t\t}\n\t\t\n\t\tfunction stopAutoScroll(){\n\t\t\t$('body').removeClass('autoScroll');\n\t\t\tsetTimeout(function(){ $('body').removeClass('scrolling autoScroll'); }, 100);\n\t\t\tautoScroll = false;\n\t\t\tclearTimeout(autoScrollTimer);\n\t\t\tautoScrollTimer = setTimeout(function(){\n\t\t\t\tautoScroll = true;\n\t\t\t}, 10000);\n\t\t}\n\t\t\n\t\t$window.on('mousedown touchstart', function(event){\n\t\t\t$('body').addClass('mousedown');\n\t\t\t\n\t\t\t$window.on('mousemove', winMouseMove);\n\t\t\t\n\t\t\tstopAutoScroll();\n\t\t}).on('mouseup touchend', function(){\n\t\t\t$('body').removeClass('mousedown');\n\t\t\t$window.off('mousemove');\n\t\t});\n\t\t*/\n\t\t\n\t\t/*\n\t\tfunction winMouseMove(event) {\n\t\t\t//if(event)\n\t\t\t\n\t\t\t\n\t\t\t//check to make sure there is data to compare against\n\t\t    if (typeof(last_position.x) != 'undefined') {\n\n\t\t        //get the change from last position to this position\n\t\t        var deltaX = last_position.x - event.clientX,\n\t\t            deltaY = last_position.y - event.clientY;\n\n\t\t        //check which direction had the highest amplitude and then figure out direction by checking if the value is greater or less than zero\n\t\t        if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX > 0) {\n\t\t            //left\n\t\t\t\t\tconsole.log('moving left')\n\t\t\t\t\txPos -= Math.abs(deltaX);\n\t\t        } else if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX < 0) {\n\t\t            //right\n\t\t        } else if (Math.abs(deltaY) > Math.abs(deltaX) && deltaY > 0) {\n\t\t            //up\n\t\t        } else if (Math.abs(deltaY) > Math.abs(deltaX) && deltaY < 0) {\n\t\t            //down\n\t\t        }\n\t\t    }\n\n\t\t    //set the new last position to the current for next time\n\t\t    last_position = {\n\t\t        x : event.clientX,\n\t\t        y : event.clientY\n\t\t    };\n\t\t\t\n\t\t\t\n\t\t}\n\t\t*/\n\t\t\n\t\t\n\t\t$window.on('mousewheel touchmove', function(event){\n\t\t\tconsole.log('mousewheel')\n\t\t\t\n\t\t\tif(event.type == 'mousewheel') {\n\t\t\t\tif(event.deltaY < 0) {\n\t\t\t\t\txPos += event.deltaY;\n\t\t\t\t\txListener += event.deltaY;\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif(event.deltaX > 1) {\n\t\t\t\t\txPos -= event.deltaX;\n\t\t\t\t\txListener -= event.deltaX;\n\t\t\t\t}\n\t\t\t} else if(event.type == 'touchmove') {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t//return true;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t//console.log(event.type)\n\t\t\t$('body').addClass('scrolling');\n\t\t\t\n\t\t\tclearTimeout($.data(this, 'timer'));\n\t\t\t  $.data(this, 'timer', setTimeout(function() {\n\t\t\t\t  $('body').removeClass('scrolling');\n\t\t\t     //do something\n\t\t\t  }, 250));\n\t\t\t  \n\t\t\t//checkScrollPos()  \n\t\t\t//stopAutoScroll();\n\t\t});\n\t\t\n\t\t\n\t\t\n\t\tfunction onScroll(event) {\n\t\t\tvar st = $('#wrapper').scrollTop();\n\t\t\t\n\t\t\t//desktop loop\n\t\t\tif(st >= $el.find('#scroller').height() - $window.height()) {\n\t\t\t\t$('#wrapper').scrollTop(0)\n\t\t\t}\n\t\t\t\n\t\t\tcontrolScroll.scroll( st );\n\t\t}\n\n\t\t\n\t\tfunction init(){\n\t\t\t//controlScroll.setScrollContainer( $('#') );\n\t\t\t$('#scroller').addClass('desktop');\n\t\t\t\n\t\t\t$scrollContainer.on('scroll', onScroll);\n\t\t\t$window.on('mousedown', winMouseDown).on('mousemove', winMove);\n\t\t}\n\t\t\n\t\tfunction winMouseDown(event) {\n\t\t\n\t\t\t\tconsole.log(event.target)\n\t\n\t\t\t\tvar _x = event.pageX;\n\t\t\t\tvar _y = event.pageY;\n\t\n\t\t\t\tif( (_x >= $('input').position().left) && (_x <= $('input').position().left + $('input').outerWidth()) && (_y >= $('input').position().top) && (_y <= $('input').position().top + $('input').outerHeight()) )\n\t\t\t\t{\n\t\t\t\t\t$scrollContainer.scrollTop(0);\n\t\t\t\t\t$('input.top-input').focus();\n\t\t\t\t\tsetTimeout(function(){ $('input.top-input').focus() }, 100);\n\t\t\t\t\tconsole.log('pressed');\n\t\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction testOver(_x, _y, element, cursor) {\n\t\t\t//console.log(element)\n\t\t\tif( (_x >= $(element).position().left) && (_x <= $(element).position().left + $(element).outerWidth()) && (_y >= $(element).position().top) && (_y <= $(element).position().top + $(element).outerHeight()) )\n\t\t\t{\n\t\t\t\t$('body').addClass(cursor)\n\t\t\t\t$(element).addClass('over');\n\t\t\t} else{\n\t\t\t\t$('body').removeClass(cursor)\n\t\t\t\t$(element).removeClass('over');\n\t\t\t}\n\t\t}\n\n\t\tfunction winMove(event){\n\t\t\tvar _x = event.pageX;\n\t\t\tvar _y = event.pageY;\n\n\t\t\ttestOver(_x, _y, $('input'), 'text');\n\t\t\ttestOver(_x, _y, $('.button--submit'), 'pointer');\n\t\t}\n\n\n\t\tif(!settings.isMobile) {\n\t\t\tinit();\n\t\t}\n\t\t\n};\n  ","\nvar form = module.exports = function( ) {\n\t\n\tvar $window = $(window);\n\t\n\t// sync input values\n\t$('input').on('keydown', function(){\n\t\t$('input.bottom-input').val( $('input.top-input').val() )\n\t});\n\t\n\t$window.on('mousewheel touchmove', function(event){\n\t\t//$('input').blur();\n\t});\n\t\n};\n","var settings = require( \"modules/settings\" ),\n\tthrottle = require(\"modules/throttle\"),\n\tcontrolScroll = require(\"modules/control-scroll\"),\n\tvideos = require(\"modules/videos\"),\n\tform = require(\"modules/form\")\n\n\nmodule.exports = function( el ) {\n\t\tvar $el = $( el ),\n\t\t$window = $( window ),\n\t\tmyScroll,\n\t\tposition;\n\n\n\t\t//console.log(videos.getName())\n\n\n\t\tfunction updatePosition () {\n\t\t\n\t\t\t//mobile loop\n\t\t\tif(-this.y >= $el.find('#scroller').height() - $window.height()) {\n\t\t\t\tthis.scrollTo(0, 0);\n\t\t\t}\n\t\t\t\n\t\t\tvar st = -this.y;\n\t\t\t\n\t\t\t\n\t\t\tcontrolScroll.scroll(st);\n\t\t\t\n\t\t\n\t\t\n\t\t}\n\n\t\tfunction attachScroller() {\n\t\t\t//position = document.getElementById('position');\n\t\t\t\n\t\t\tmyScroll = new IScroll('#wrapper', { \n\t\t\t\tprobeType: 3, \n\t\t\t\tscrollbars: 'custom',\n\t\t\t\tfadeScrollbars: true,\n\t\t\t\tbounce: false,\n\t\t\t\tmouseWheel: true,\n\t\t\t\tscrollbarClass: 'scrollbar',\n\t\t\t\tdeceleration:0.002\n\t\t\t});\n\t\t\t\n\t\t\tsettings.scroller = myScroll;\n\t\t\t\n\t\t\t//console.log(myScroll);\n\n\t\t\tmyScroll.on('scroll', updatePosition);\n\t\t\tmyScroll.on('scrollEnd', updatePosition);\n\t\t}\n\t\t\n\n\t\t\n\n\t\t//document.addEventListener('DOMContentLoaded', loaded, false);\n\t\t\n\t\tfunction init(){\n\t\t\t\n\t\t\tconsole.log('%c[mobile-scroll module init]', 'color:green')\n\t\t\t\n\t\t\n\t\t\tdocument.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);\n\t\t\t\n\t\t\tcontrolScroll.setScrollContainer($('#wrapper'));\n\t\t\tattachScroller();\n\t\t\t\n\t\t\t$window.on('touchstart', touchStart);\n\t\t\t\n\t\t\t$window.on('resize', winResize);\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tcontrolScroll.scrollMobile(myScroll, -200)\n\t\t\t\t//myScroll.scrollTo(0, -200)\n\t\t\t}, 2000);\n\t\t}\n\t\t\n\t\t\n\t\tfunction touchStart(event) {\n\t\t\tconsole.log(event.target)\n\t\n\t\t\tvar _x = event.originalEvent.touches[0].pageX;\n\t\t\tvar _y = event.originalEvent.touches[0].pageY;\n\t\n\t\t\tif( (_x >= $('input').position().left) && (_x <= $('input').position().left + $('input').outerWidth()) && (_y >= $('input').position().top) && (_y <= $('input').position().top + $('input').outerHeight()) )\n\t\t\t{\n\t\t\t\tmyScroll.scrollTo(0, 0);\n\t\t\t\t$('input.top-input').focus();\n\t\t\t\tconsole.log('pressed');\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction winResize(){\n\t\t\t\n\t\t\t$('.top-section').css('height', $window.height());\n\t\t\t\n\t\t\tif( $window.height() * 1.5 < $window.width() ) {\n\t\t\t\t$('body').addClass('landscape-format');\n\t\t\t} else {\n\t\t\t\t$('body').removeClass('landscape-format')\n\t\t\t}\n\t\t\t\t\n\t\t}\n\n\t\t\n\t\t//winResize();\n\t\t\n\t\tif(settings.isMobile) {\n\t\t\twinResize();\n\t\t\tinit();\n\t\t}\n\t\t\n\t\t\n};\n  ","var makeVideoPlayableInline = require('iphone-inline-video'),\n\tsettings = require('modules/settings'),\n\tmousewheel = require('jquery-mousewheel')($);\n\nvar scrollLoop = module.exports = function( el ) {\n\t\tvar $el = $( el ),\n\t\t$window = $( window ),\n\t\t$videoScroll = $el.find('.video-scroll'),\n\t\t$videoWidth = $('.video-holder').width(),\n\t\tvidScrollWidth = 0,\n\t\txListener = 0,\n\t\txPos = 0,\n\t\tscrollInt,\n\t\tinitLoad = true,\n\t\tautoScrollTimer,\n\t\tautoScroll = false,\n\t\tlast_position = {},\n\t\t$scrollContainer = $('.wrapper'),\n\t\tst;\n\n\t\tconsole.log('%c[scroll-loop module init]', 'color:blue;');\n\t\t\n\t\tscrollLoop.getName = function(){\n\t\t\treturn 'hi';\n\t\t}\n\t\t\n\t\tscrollLoop.setScrollContainer = function(scrollContainer){\n\t\t\t$scrollContainer = scrollContainer;\n\t\t}\n\t\t\n\t\tscrollLoop.scroll = function(y) {\n\t\t\t\n\t\t}\n\t\n\t\t\n\t\tscrollLoop.fadeOverlay = function(scrollContainer, y) {\n\t\t\tst = y;\n\t\t\t\n\t\t\t//console.log('st ' +scrollContainer[0].scrollHeight);\n\t\t\t\n\t\t\tif(!scrollContainer.hasClass('looped')) {\n\t\t\t\tif(st < $window.height()) {\n\t\t\t\t\t$('.top-section.bottom-fixed').css('opacity', 0).removeClass('show');\n\t\t\t\t\tvar op = (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('below window height');\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( st < $window.height() * 2) {\n\t\t\t\t\n\t\t\t\t\tvar op = st - $window.height() + (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('below two times')\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(st >= scrollContainer[0].scrollHeight - ($window.height() * 2 ) ) {\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height()  )\n\t\t\t\t//console.log( $scrollContainer[0].scrollHeight / (st + $window.height()) )\n\t\t\t\t//console.log($scrollContainer[0].scrollHeight);\n\t\t\t\t//console.log(st + $window.height());\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  )/ $window.height()  )\n\t\t\t\t//console.log( ($scrollContainer[0].scrollHeight - st) / ( $scrollContainer[0].scrollHeight - $window.height()) )\n\t\t\t\t\n\t\t\t\tconsole.log('at end of page')\n\t\t\t\t\n\t\t\t\tvar op = ( scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height();\n\t\t\t\t\n\t\t\t\tconsole.log(op);\n\t\t\t\t\n\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t$('.top-section.bottom-fixed').addClass('show').css('opacity', 1 - op);\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tscrollLoop.checkScrollPos = function(){\n\t\t\tclearInterval(scrollInt);\n\t\t\tvar st = $scrollContainer.scrollTop();\n\t\t\t\n\t\t\t\n\t\t\tif(st < $window.height()) {\n\t\t\t\t\n\t\t\t\t//$('body').scrollTop($('body')[0].scrollHeight);\n\t\t\t}\n\t\t\t\n\t\t\tif($scrollContainer.hasClass('looped')) {\n\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\n\t\t\t\tif(st > $window.height()) {\n\t\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\t//$scrollContainer.scrollTop(0);\n\t\t\t\t} \n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - $window.height()) {\n\t\t\t\t$('.wrapper').addClass('looped');\n\t\t\t\t$scrollContainer.animate({ scrollTop:0 }, 0)\n\t\t\t\t$scrollContainer.scrollTop(0);\n\t\t\t\t//$('.top-section.bottom-fixed').css('opacity', 0)\n\t\t\t}\n\t\t}\n\t\t\n\t\t/*\n\t\tfunction checkScrollPos(){\n\t\t\tclearInterval(scrollInt);\n\t\t\tvar st = $scrollContainer.scrollTop();\n\t\t\t\n\t\t\t\n\t\t\tif(st < $window.height()) {\n\t\t\t\t$('.top-section.bottom-fixed').css('opacity', 0).removeClass('show');\n\t\t\t\t//$('body').scrollTop($('body')[0].scrollHeight);\n\t\t\t}\n\t\t\t\n\t\t\tif($scrollContainer.hasClass('looped')) {\n\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\n\t\t\t\tif(st > $window.height()) {\n\t\t\t\t\t$scrollContainer.removeClass('looped');\n\t\t\t\t\t//$scrollContainer.scrollTop(0);\n\t\t\t\t} \n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - $window.height()) {\n\t\t\t\t$('.wrapper').addClass('looped');\n\t\t\t\t$scrollContainer.animate({ scrollTop:0 }, 0)\n\t\t\t\t$scrollContainer.scrollTop(0);\n\t\t\t\t//$('.top-section.bottom-fixed').css('opacity', 0)\n\t\t\t}\n\t\t}\n\t\t*/\n\t\t\n\t\t/*\n\t\tfunction fadeOverlay(){\n\t\t\tvar st = $scrollContainer.scrollTop();\n\t\t\tif(!$scrollContainer.hasClass('looped')) {\n\t\t\t\tif(st < $window.height()) {\n\t\t\t\t\n\t\t\t\t\tvar op = (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( st < $window.height() * 2) {\n\t\t\t\t\n\t\t\t\t\tvar op = st - $window.height() + (st / $window.height()) * 1;\n\t\t\t\t\t//console.log('op ' + op)\n\t\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t//$('#color-overlay').css('opacity', 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(st >= $scrollContainer[0].scrollHeight - ($window.height() * 2 ) ) {\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height()  )\n\t\t\t\t//console.log( $scrollContainer[0].scrollHeight / (st + $window.height()) )\n\t\t\t\t//console.log($scrollContainer[0].scrollHeight);\n\t\t\t\t//console.log(st + $window.height());\n\t\t\t\t//console.log( ( $scrollContainer[0].scrollHeight - st  )/ $window.height()  )\n\t\t\t\t//console.log( ($scrollContainer[0].scrollHeight - st) / ( $scrollContainer[0].scrollHeight - $window.height()) )\n\t\t\t\tvar op = ( $scrollContainer[0].scrollHeight - st  - $window.height() )/$window.height();\n\t\t\t\t$('#color-overlay').css('opacity', op);\n\t\t\t\t$('.top-section.bottom-fixed').addClass('show').css('opacity', 1 - op);\n\t\t\t}\n\t\t}\n\t\t*/\n\t\t\n\t\tfunction startAutoScroll(){\n\t\t\t$('body').addClass('autoScroll');\n\t\t}\n\t\t\n\t\tfunction stopAutoScroll(){\n\t\t\t$('body').removeClass('autoScroll');\n\t\t\tsetTimeout(function(){ $('body').removeClass('scrolling autoScroll'); }, 100);\n\t\t\tautoScroll = false;\n\t\t\tclearTimeout(autoScrollTimer);\n\t\t\tautoScrollTimer = setTimeout(function(){\n\t\t\t\tautoScroll = true;\n\t\t\t}, 10000);\n\t\t}\n\t\t\n\t\t/*\n\t\t$window.on('mousedown touchstart', function(event){\n\t\t\t$('body').addClass('mousedown');\n\t\t\t\n\t\t\t$window.on('mousemove', winMouseMove);\n\t\t\t\n\t\t\tstopAutoScroll();\n\t\t}).on('mouseup touchend', function(){\n\t\t\t$('body').removeClass('mousedown');\n\t\t\t$window.off('mousemove');\n\t\t});\n\t\t*/\n\t\t\n\n\t\t$window.on('mousewheel touchmove touchstart', function(event){\n\t\t\t\n\t\t\t\n\t\t\tif(event.type == 'mousewheel') {\n\t\t\t\tif(event.deltaY < 0) {\n\t\t\t\t\txPos += event.deltaY;\n\t\t\t\t\txListener += event.deltaY;\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif(event.deltaX > 1) {\n\t\t\t\t\txPos -= event.deltaX;\n\t\t\t\t\txListener -= event.deltaX;\n\t\t\t\t}\n\t\t\t} else if(event.type == 'touchmove') {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t//return true;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t//console.log(event.type)\n\t\t\t$('body').addClass('scrolling');\n\t\t\t\n\t\t\tclearTimeout($.data(this, 'timer'));\n\t\t\t  $.data(this, 'timer', setTimeout(function() {\n\t\t\t\t  $('body').removeClass('scrolling');\n\t\t\t     //do something\n\t\t\t  }, 250));\n\t\t\t  \n\t\t\t//checkScrollPos()  \n\t\t\t//stopAutoScroll();\n\t\t});\n\t\t\n\t\t/*\n\t\t$window.on('mousewheel touchmove', function(event){\n\t\t\t\n\t\t\t\n\t\t\tif(event.type == 'mousewheel') {\n\t\t\t\tif(event.deltaY < 0) {\n\t\t\t\t\txPos += event.deltaY;\n\t\t\t\t\txListener += event.deltaY;\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif(event.deltaX > 1) {\n\t\t\t\t\txPos -= event.deltaX;\n\t\t\t\t\txListener -= event.deltaX;\n\t\t\t\t}\n\t\t\t} else if(event.type == 'touchmove') {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t//console.log(event.type)\n\t\t\t$('body').addClass('scrolling');\n\t\t\t\n\t\t\tclearTimeout($.data(this, 'timer'));\n\t\t\t  $.data(this, 'timer', setTimeout(function() {\n\t\t\t\t  $('body').removeClass('scrolling');\n\t\t\t     //do something\n\t\t\t  }, 250));\n\t\t\t  \n\t\t\tcheckScrollPos()  \n\t\t\tstopAutoScroll();\n\t\t});\n\t\t*/\n\t\n\t\t\n\t\t\n\t\t\n\t\tfunction init(){\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tsetVideos();\n\t\t\tfadeOverlay();\n\t\t\t$('#video-container').fadeIn(6000);\n\t\t\t\n\t\t\t$scrollContainer.on('scroll', function(event) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\t//console.log('scroll triggered')\n\t\t\t\t//var gradientTopPos = $('body').scrollTop();\n\t\t\t\n\t\t\t\tcheckScrollPos();\n\t\t\t\tfadeOverlay();\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\t//console.log(event.deltaX)\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t    watchVideos();\n\t\t\t\t$('body').addClass('scrolling');\n\t\t\t\n\t\t\t\t//stopAutoScroll();\n\t\t\t  \n\t\t\t  \n\t\t\t    //console.log(event.deltaX, event.deltaY, event.deltaFactor);\n\t\t\t});\n\t\t\t\n\t\t\tautoScrollTimer = setTimeout(function(){\n\t\t\t\tautoScroll = true;\n\t\t\t}, 6000);\n\t\t\t\n\t\t\t// Usage\n\t\t\tanimLoop(function( deltaT ) {\n\t\t\t\txPos -= .2;\n\t\t\t\txListener -= .2;\n\t\t\t\t$('.video-scroll').css({\n\t\t\t\t    \"-webkit-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"-ms-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"transform\":\"translate(\"+xPos+\"px,0)\"\n\t\t\t\t  });​\n\t\t\t\t\t\n\t\t\t\t  //console.log($window.width())\n\t\t\t\t  //console.log ($('video').eq(0).position().left)\n\t\t\t\t  if(autoScroll) {\n\t\t\t\t\t  //$('input').blur();\n\t\t\t\t\t  startAutoScroll();\n\t\t\t\t\t  checkScrollPos();\n\t\t\t\t\t  fadeOverlay();\n\t\t\t\t  \t  $scrollContainer.scrollTop($scrollContainer.scrollTop() + 1);\n\t\t\t\t\t  //initLoad = false;\n\t\t\t\t  }\n\t\t\t\t  watchVideos();\n\t\t\t\t  \n\t\t\t    //elem.style.left = ( left += 10 * deltaT / 16 ) + \"px\";\n\n\t\t\t// optional 2nd arg: elem containing the animation\n\t\t\t} );\n\t\t\t\n\t\t\t$('.newsletter input').on('focus', inputFocus);\n\t\t\t\n\t\t\t$window.on('resize', winResize);\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction inputFocus(){\n\t\t\tif(!$('.bottom-fixed').hasClass('show')) {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t}\n\t\t\t$scrollContainer\n\t\t}\n\t\t\n\t\tfunction watchVideos(){\n\t\t\t\n\t\t\t//console.log( $('.video-1-clone').position().left )\n\t\t\t/*\n\t\t\t$('.video-holder').each(function(){\n\t\t\t\tif($(this).position().left + $(this).width() >= 0 && $(this).position().left <= $window.width() ) {\n\t\t\t\t\t$(this).find('video')[0].play();\n\t\t\t\t} else {\n\t\t\t\t\t//console.log($(this).find('video').attr('src'))\n\t\t\t\t\t$(this).find('video')[0].pause();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif( $('.video-1-clone').position().left <= 0 ) {\n\t\t\t\txPos = 0;\n\t\t\t\t\n\t\t\t\t$('.video-scroll').css({\n\t\t\t\t    \"-webkit-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"-ms-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"transform\":\"translate(\"+xPos+\"px,0)\"\n\t\t\t\t  });​\n\t\t\t\t  \n\t\t\t\t\n\t\t\t}\n\t\t\t*/\n\t\t\t/*\n\t\t\tif(xPos < -vidScrollWidth ) {\n\t\t\t\txPos = 0;\n\t\t\t\txListener = 0;\n\t\t\t\t$videoScroll.append($('.video-holder').eq(0));\n\t\t\t\t\n\t\t\t\tfor(var i=0; i<$('.video-holder').length; i++) {\n\t\t\t\t\t$('.video-holder').eq(i).css('left', ( $videoWidth * i) + 'px');\n\t\t\t\t}\n\t\t\t\t$('.video-holder').eq(1).find('video')[0].play();\n\t\t\t\tconsole.log('reset entire piece')\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tif(xListener < -$videoWidth) {\n\t\t\t\txListener = 0;\n\t\t\t\tvar _left = Number( $('.video-holder').last().css('left').split('px').join('') ) + $videoWidth;\n\t\t\t\n\t\t\t\t$('.video-holder').eq(2).find('video')[0].play();\n\t\t\t\t$('.video-holder').eq(0).find('video')[0].pause();\n\t\t\t\t$('.video-holder').eq(0).css('left', _left + 'px')\n\t\t\t\t$videoScroll.append($('.video-holder').eq(0));\n\t\t\t}\n\t\t\t*/\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction setVideos(){\n\t\t\tvidScrollWidth = 0;\n\t\t\t$('.video-holder').each(function(){\n\t\t\t\t$(this).css('left', $(this).width() * $(this).index());\n\t\t\t\tvidScrollWidth += $(this).width(); \n\t\t\t});\n\t\t\t$videoScroll.css('width', vidScrollWidth);\n\t\t\t//console.log(vidScrollWidth);\n\t\t}\n\t\t\n\t\t/*\n\t\tsetInterval(function(){\n\t\t\txPos-= 1;\n\t\t\t$('.video-scroll').css({\n\t\t\t    \"-webkit-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t    \"-ms-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t    \"transform\":\"translate(\"+xPos+\"px,0)\"\n\t\t\t  });​\n\t\t}, 10);\n\t\t*/\n\t\t\n\t\n\t\tfunction animLoop( render, element ) {\n\t\t    var running, lastFrame = +new Date;\n\t\t    function loop( now ) {\n\t\t        // stop the loop if render returned false\n\t\t        if ( running !== false ) {\n\t\t            requestAnimationFrame( loop, element );\n\t\t            running = render( now - lastFrame );\n\t\t            lastFrame = now;\n\t\t        }\n\t\t    }\n\t\t    loop( lastFrame );\n\t\t}\n\n\t\t\n\t\t\n\t\t/*\n\t\t$('.video-scroll').velocity({\n\t\t\ttranslateZ: 0, // Force HA by animating a 3D property\n\t\t    translateX: \"-10000px\"\n\t\t}, {\n\t\t    \n\t\t\tduration:100000,\n\t\t    easing: \"linear\",\n\t\t});\n\t\t*/\n\t\t\n\t\tfunction winResize(){\n\t\t\t$videoWidth = $('.video-holder').width();\n\t\t\tsetVideos();\n\t\t}\n\t\t\n\t\tif(!settings.isMobile) {\n\t\t\tinit();\n\t\t}\n\t\t\n};\n  ","/**\n * Global settings shared by all modules\n * @type {Object}\n */\n\nfunction checkMobile(){\n\tif( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\n\n\nvar settings = module.exports = {\n\tbreakpoints: {\n\t\txs: 481,\n\t\ts: 769,\n\t\tm: 1000,\n\t\tml: 999,\n\t\tl: 1281,\n\t\txl: 1441,\n\t\txxl: 1921\n\t},\n\tsiteURL:$('body').data('site-url'),\n\tscrollContainer: 0,\n\tanimationSpeed: 400,\n\tanimationType: \"linear\",\n\tanimating: false,\n\tunique: true,\n\tscroller: null,\n\tisMobile: checkMobile(),\n\tpage: '',\n};\n\nsettings.isMobile = settings.isMobile;\nsettings.breakpoints = settings.breakpoints;\nsettings.animationSpeed = settings.animationSpeed;\nsettings.animationType = settings.animationType;\nsettings.scrollPos = settings.scrollPos;\nsettings.scrollContainer = settings.scrollContainer;\nsettings.animating = settings.animating;\nsettings.unique = settings.unique;\nsettings.scroller = settings.scroller;\n","// throttle function from Remy Sharp\n// https://remysharp.com/2010/07/21/throttling-function-calls\nmodule.exports = function( fn, threshold, scope ) {\n\tif ( !threshold ) {\n\t\tthreshold = 250;\n\t}\n\n\tvar last, deferTimer;\n\n\treturn function() {\n\t\tvar context = scope || this,\n\t\t\tnow  = +new Date(),\n\t\t\targs = arguments;\n\n\t\tif ( last && now < last + threshold ) {\n\t\t\t// hold on to it\n\t\t\tclearTimeout( deferTimer );\n\t\t\tdeferTimer = setTimeout(function() {\n\t\t\t\tlast = now;\n\t\t\t\tfn.apply( context, args );\n\t\t\t}, threshold );\n\t\t} else {\n\t\t\tlast = now;\n\t\t\tfn.apply( context, args );\n\t\t}\n\t};\n};\n","var makeVideoPlayableInline = require('iphone-inline-video'),\n\tsettings = require('modules/settings'),\n\tmousewheel = require('jquery-mousewheel')($);\n\nvar videos = module.exports = function( el ) {\n\t\tvar $el = $( el ),\n\t\t$window = $( window ),\n\t\t$videoScroll = $el.find('.video-scroll'),\n\t\t$videoWidth = $('.video-holder').width(),\n\t\tvidScrollWidth = 0,\n\t\txListener = 0,\n\t\txPos = 0,\n\t\tscrollInt,\n\t\tinitLoad = true,\n\t\tautoScrollTimer,\n\t\tautoScroll = false,\n\t\tlast_position = {},\n\t\t$scrollContainer = $('.wrapper'),\n\t\tst;\n\n\t\tconsole.log('%c[video module init]', 'color:blue;');\n\t\t\n\t\t\n\t\tfunction winMouseMove(event) {\n\t\t\t//if(event)\n\t\t\t\n\t\t\t\n\t\t\t//check to make sure there is data to compare against\n\t\t    if (typeof(last_position.x) != 'undefined') {\n\n\t\t        //get the change from last position to this position\n\t\t        var deltaX = last_position.x - event.clientX,\n\t\t            deltaY = last_position.y - event.clientY;\n\n\t\t        //check which direction had the highest amplitude and then figure out direction by checking if the value is greater or less than zero\n\t\t        if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX > 0) {\n\t\t            //left\n\t\t\t\t\tconsole.log('moving left')\n\t\t\t\t\txPos -= Math.abs(deltaX);\n\t\t        } else if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX < 0) {\n\t\t            //right\n\t\t        } else if (Math.abs(deltaY) > Math.abs(deltaX) && deltaY > 0) {\n\t\t            //up\n\t\t        } else if (Math.abs(deltaY) > Math.abs(deltaX) && deltaY < 0) {\n\t\t            //down\n\t\t        }\n\t\t    }\n\n\t\t    //set the new last position to the current for next time\n\t\t    last_position = {\n\t\t        x : event.clientX,\n\t\t        y : event.clientY\n\t\t    };\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\n\t\t\n\t\t\n\t\t\n\t\tfunction init(){\n\t\t\t\n\t\t\tif(settings.isMobile) {\n\t\t\t\t$('video').each(function () {\n\t\t\t\t    makeVideoPlayableInline(this);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tsetVideos();\n\t\t\n\t\t\t$('#video-container').fadeIn(6000);\n\t\t\t\n\n\t\t\tif(!settings.isMobile){\n\t\t\t\t// Usage\n\t\t\t\tanimLoop(function( deltaT ) {\n\t\t\t\t\txPos -= .2;\n\t\t\t\t\txListener -= .2;\n\t\t\t\t\t//$('.video-scroll').css('left', xPos);\n\t\t\t\t\t\n\t\t\t\t\t$('.video-scroll').css({\n\t\t\t\t\t    \"-webkit-transform\":\"translate3d(\"+xPos+\"px,0,0)\",\n\t\t\t\t\t    \"-ms-transform\":\"translate3d(\"+xPos+\"px,0,0)\",\n\t\t\t\t\t    \"transform\":\"translate3d(\"+xPos+\"px,0,0)\"\n\t\t\t\t\t  });​\n\t\t\t\t\t\n\t\t\t\t\t  watchVideos();\n\n\t\t\t\t} );\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t//$('.newsletter input').on('focus', inputFocus);\n\t\t\t\n\t\t\t$window.on('resize', winResize);\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction inputFocus(){\n\t\t\tif(!$('.bottom-fixed').hasClass('show')) {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction watchVideos(){\n\t\t\t\n\t\t\t//console.log( $('.video-1-clone').position().left )\n\t\t\t\n\t\t\t$('.video-holder').each(function(){\n\t\t\t\tif($(this).position().left + $(this).width() >= 0 && $(this).position().left <= $window.width() ) {\n\t\t\t\t\tif(!$(this).find('video').hasClass('playing')) {\n\t\t\t\t\t\t$(this).find('video')[0].play();\n\t\t\t\t\t\tconsole.log('play ' + $(this).find('video').attr('src'))\n\t\t\t\t\t}\n\t\t\t\t\t$(this).find('video').addClass('playing');\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tif($(this).find('video').hasClass('playing')){\n\t\t\t\t\t\tconsole.log('pause ' + $(this).find('video').attr('src'))\n\t\t\t\t\t\t$(this).find('video').removeClass('playing');\n\t\t\t\t\t\t$(this).find('video')[0].pause();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t//$('#video-1').currentTime = $('#video-8')[0].currentTime;\n\t\t\t//console.log($('.video-1-clone').position().left)\n\t\t\tif( $('.video-1-clone').position().left <= 0 ) {\n\t\t\t\tconsole.log('loop videos')\n\t\t\t\t\n\t\t\t\txPos = 0;\n\t\t\t\txListener = 0;\n\t\t\t\t$('#video-1').currentTime = $('#video-8')[0].currentTime;\n\t\t\t\t$('.video-scroll').css({\n\t\t\t\t    \"-webkit-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"-ms-transform\":\"translate(\"+xPos+\"px,0)\",\n\t\t\t\t    \"transform\":\"translate(\"+xPos+\"px,0)\"\n\t\t\t\t  });​\n\t\t\t\t  \n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t$window.on('mousewheel touchmove', function(event){\n\t\t\tevent.stopPropagation();\n\t\t\t\n\t\t\tif(event.type == 'mousewheel') {\n\t\t\t\tif(event.deltaY < 0) {\n\t\t\t\t\txPos += event.deltaY;\n\t\t\t\t\txListener += event.deltaY;\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif(event.deltaX > 1) {\n\t\t\t\t\txPos -= event.deltaX;\n\t\t\t\t\txListener -= event.deltaX;\n\t\t\t\t}\n\t\t\t} else if(event.type == 'touchmove') {\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t//return true;\n\t\t\t}\n\t\t\t\n\t\t\twatchVideos();\n\n\t\t});\n\t\t\n\t\tfunction setVideos(){\n\t\t\tvidScrollWidth = 0;\n\t\t\t$('.video-holder').each(function(){\n\t\t\t\t$(this).css('width', Math.floor($window.height() * 1.777)).css('left', Math.floor( $(this).width() * $(this).index()) );\n\t\t\t\tvidScrollWidth += $(this).width(); \n\t\t\t});\n\t\t\t$videoScroll.css('width', vidScrollWidth);\n\t\t\t//console.log(vidScrollWidth);\n\t\t}\n\t\t\n\t\t\n\t\tfunction animLoop( render, element ) {\n\t\t    var running, lastFrame = +new Date;\n\t\t    function loop( now ) {\n\t\t        // stop the loop if render returned false\n\t\t        if ( running !== false ) {\n\t\t            requestAnimationFrame( loop, element );\n\t\t            running = render( now - lastFrame );\n\t\t            lastFrame = now;\n\t\t        }\n\t\t    }\n\t\t    loop( lastFrame );\n\t\t}\n\n\t\t\n\t\t\n\n\t\t\n\t\tfunction winResize(){\n\t\t\t$videoWidth = $('.video-holder').width();\n\t\t\tsetVideos();\n\t\t}\n\t\t\n\n\t\tinit();\n\t\t\n\t\t\n};\n  "]}